var Fayde;!function(e){var t;!function(e){e.version="0.20.1"}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){t.Library=e.TypeManager.resolveLibrary("lib://fayde.controls")}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Fayde;!function(e){var t;!function(t){var n=function(t){function n(){t.call(this),this.DefaultStyleKey=n}return __extends(n,t),n.prototype.OnBusyContentChanged=function(e,t){this.SetCurrentValue(n.HasContentProperty,!!t)},n.IsBusyProperty=DependencyProperty.Register("IsBusy",function(){return Boolean},n,!1),n.HasContentProperty=DependencyProperty.RegisterReadOnly("HasContent",function(){return Boolean},n,!1),n.BusyContentProperty=DependencyProperty.Register("BusyContent",function(){return Object},n,void 0,function(e,t){return e.OnBusyContentChanged(t.OldValue,t.NewValue)}),n.BusyContentTemplateProperty=DependencyProperty.Register("BusyContentTemplate",function(){return e.DataTemplate},n),n.OverlayStyleProperty=DependencyProperty.Register("OverlayStyle",function(){return e.Style},n),n}(t.ContentControl);t.BusyIndicator=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var r=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.IsItemItsOwnContainer=function(e){return e instanceof t.MenuItem||e instanceof t.Separator},r.prototype.GetContainerForItem=function(){return new t.MenuItem},r.prototype.PrepareContainerForItem=function(o,i){n.prototype.PrepareContainerForItem.call(this,o,i);var a=o;if(a instanceof t.MenuItem&&(a.ParentMenuBase=this,a!=i)){var s=this.ItemTemplate,l=this.ItemContainerStyle;null!=s&&a.SetValue(e.Controls.ItemsControl.ItemTemplateProperty,s),null!=l&&r.HasDefaultValue(a,t.HeaderedItemsControl.ItemContainerStyleProperty)&&a.SetValue(t.HeaderedItemsControl.ItemContainerStyleProperty,l),r.HasDefaultValue(a,t.HeaderedItemsControl.HeaderProperty)&&(a.Header=i),null!=s&&a.SetValue(t.HeaderedItemsControl.HeaderTemplateProperty,s),null!=l&&a.SetValue(e.FrameworkElement.StyleProperty,l)}},r.HasDefaultValue=function(e,t){return e.ReadLocalValue(t)===DependencyProperty.UnsetValue},r.ItemContainerStyleProperty=DependencyProperty.Register("ItemContainerStyle",function(){return e.Style},r),r}(e.Controls.ItemsControl);n.MenuBase=r}(n=t.Primitives||(t.Primitives={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function r(){n.call(this),this.Opened=new e.RoutedEvent,this.Closed=new e.RoutedEvent,this._Owner=null,this._PopupAlignmentPoint=new Point,this._SettingIsOpen=!1,this._Popup=null,this._Overlay=null,this.DefaultStyleKey=r,this.$RootVisualTracker=new t.contextmenu.RootVisualTracker(this)}return __extends(r,n),r.prototype.OnHorizontalOffsetChanged=function(e){this.UpdateContextMenuPlacement()},r.prototype.OnVerticalOffsetChanged=function(e){this.UpdateContextMenuPlacement()},r.prototype.OnIsOpenChanged=function(e){this._SettingIsOpen||(e.NewValue===!0?this.OpenPopup(this.$RootVisualTracker.mousePosition):this.ClosePopup())},r.prototype.OnKeyDown=function(t){switch(t.Key){case e.Input.Key.Escape:this.ClosePopup(),t.Handled=!0;break;case e.Input.Key.Up:this.FocusNextItem(!1),t.Handled=!0;break;case e.Input.Key.Down:this.FocusNextItem(!0),t.Handled=!0}n.prototype.OnKeyDown.call(this,t)},r.prototype.OnMouseLeftButtonDown=function(e){e.Handled=!0,n.prototype.OnMouseLeftButtonDown.call(this,e)},r.prototype.OnMouseRightButtonDown=function(e){e.Handled=!0,n.prototype.OnMouseRightButtonDown.call(this,e)},Object.defineProperty(r.prototype,"Owner",{get:function(){return this._Owner},set:function(t){if(this._Owner){var n=this._Owner instanceof e.FrameworkElement?this._Owner:null;n&&n.MouseRightButtonDown.off(this._HandleOwnerMouseRightButtonDown,this)}this._Owner=t,this._Owner&&(n=this._Owner instanceof e.FrameworkElement?this._Owner:null,n&&n.MouseRightButtonDown.on(this._HandleOwnerMouseRightButtonDown,this))},enumerable:!0,configurable:!0}),r.prototype._HandleOwnerMouseRightButtonDown=function(e,t){this.OpenPopup(t.GetPosition(null)),t.Handled=!0},r.prototype._HandleOverlayMouseButtonDown=function(e,t){this.ClosePopup(),t.Handled=!0},r.prototype._HandleContextMenuSizeChanged=function(e,t){this.UpdateContextMenuPlacement()},r.prototype.ChildMenuItemClicked=function(){this.ClosePopup()},r.prototype.UpdateContextMenuPlacement=function(){var e=this._PopupAlignmentPoint,n=this.$RootVisualTracker.getAvailableSize(),r=Math.max(0,Math.min(e.x+this.HorizontalOffset,n.width-this.ActualWidth)),o=Math.max(0,Math.min(e.y+this.VerticalOffset,n.height-this.ActualHeight));t.Canvas.SetLeft(this,r),t.Canvas.SetTop(this,o);var i=this._Overlay;i&&(i.Width=n.width,i.Height=n.height)},r.prototype.OpenPopup=function(n){var r=this;this._PopupAlignmentPoint=n;var o=new t.Canvas;o.Background=new e.Media.SolidColorBrush(Color.KnownColors.Transparent),this._Overlay=o,this._Overlay.MouseLeftButtonDown.on(this._HandleOverlayMouseButtonDown,this),this._Overlay.MouseRightButtonDown.on(this._HandleOverlayMouseButtonDown,this),this._Overlay.Children.Add(this);for(var i=this._Popup=new t.Primitives.Popup,a=this._Owner;a&&!(a instanceof e.UIElement);)a=a.Parent;if(a&&(i.XamlNode.RegisterInitiator(a),this.$RootVisualTracker.tryInit(a)),i.Child=this._Overlay,this.SizeChanged.on(this._HandleContextMenuSizeChanged,this),this.$RootVisualTracker.setOnSizeChanged(function(e){return r.UpdateContextMenuPlacement()}),this.UpdateContextMenuPlacement(),this.ReadLocalValue(e.DependencyObject.DataContextProperty)===DependencyProperty.UnsetValue){var s=new e.Data.Binding("DataContext");s.Source=this.Owner||this.$RootVisualTracker.rootVisual,this.SetBinding(e.DependencyObject.DataContextProperty,s)}i.IsOpen=!0,this.Focus(),this._SettingIsOpen=!0,this.IsOpen=!0,this._SettingIsOpen=!1,this.OnOpened(new e.RoutedEventArgs)},r.prototype.OnOpened=function(e){this.Opened.raise(this,e)},r.prototype.ClosePopup=function(){this._Popup&&(this._Popup.IsOpen=!1,this._Popup.Child=null,this._Popup=null),this._Overlay&&(this._Overlay.Children.Clear(),this._Overlay=null),this.SizeChanged.off(this._HandleContextMenuSizeChanged,this),this.$RootVisualTracker.setOnSizeChanged(),this._SettingIsOpen=!0,this.IsOpen=!1,this._SettingIsOpen=!1,this.OnClosed(new e.RoutedEventArgs)},r.prototype.OnClosed=function(e){this.Closed.raise(this,e)},r.prototype.FocusNextItem=function(n){var r=this.Items.Count,o=n?-1:r,i=e.Surface.GetFocusedElement(this);i instanceof t.MenuItem&&this===i.ParentMenuBase&&(o=this.ItemContainersManager.IndexFromContainer(i));var a,s=o;do s=(s+r+(n?1:-1))%r,a=this.ItemContainersManager.ContainerFromIndex(s),a instanceof t.MenuItem||(a=null);while(!(a&&a.IsEnabled&&a.Focus()||s===o))},r.HorizontalOffsetProperty=DependencyProperty.Register("HorizontalOffset",function(){return Number},r,0),r.VerticalOffsetProperty=DependencyProperty.Register("VerticalOffset",function(){return Number},r,0),r.IsOpenProperty=DependencyProperty.Register("IsOpen",function(){return Boolean},r,!1),r}(t.Primitives.MenuBase);t.ContextMenu=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(){function n(){}return n.GetContextMenu=function(e){return e.GetValue(n.ContextMenuProperty)},n.SetContextMenu=function(e,t){e.SetValue(n.ContextMenuProperty,t)},n.OnContextMenuPropertyChanged=function(n,r){var o=n;if(o instanceof e.FrameworkElement){var i=r.OldValue;i instanceof t.ContextMenu&&(i.Owner=null);var a=r.NewValue;a instanceof t.ContextMenu&&(a.Owner=o)}},n.ContextMenuProperty=DependencyProperty.RegisterAttached("ContextMenu",function(){return t.ContextMenu},n,void 0,n.OnContextMenuPropertyChanged),n}();t.ContextMenuService=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){!function(e){e[e.None=0]="None",e[e.Increase=1]="Increase",e[e.Decrease=2]="Decrease"}(e.ValidSpinDirections||(e.ValidSpinDirections={}));var t=e.ValidSpinDirections;e.Library.addEnum(t,"ValidSpinDirections"),function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(e.SpinDirection||(e.SpinDirection={}));var n=e.SpinDirection;e.Library.addEnum(n,"SpinDirection"),function(e){e[e.UseFallbackItem=0]="UseFallbackItem",e[e.TextBoxCannotLoseFocus=1]="TextBoxCannotLoseFocus"}(e.InvalidInputAction||(e.InvalidInputAction={}));var r=e.InvalidInputAction;e.Library.addEnum(r,"InvalidInputAction"),function(e){e[e.Left=0]="Left",e[e.Top=1]="Top",e[e.Right=2]="Right",e[e.Bottom=3]="Bottom"}(e.Dock||(e.Dock={}));var o=e.Dock;e.Library.addEnum(o,"Dock"),function(e){e[e.None=0]="None",e[e.ObjectErrors=1]="ObjectErrors",e[e.PropertyErrors=2]="PropertyErrors",e[e.All=3]="All"}(e.ValidationSummaryFilters||(e.ValidationSummaryFilters={}));var i=e.ValidationSummaryFilters;e.Library.addEnum(i,"ValidationSummaryFilters"),function(e){e[e.ObjectError=1]="ObjectError",e[e.PropertyError=2]="PropertyError"}(e.ValidationSummaryItemType||(e.ValidationSummaryItemType={}));var a=e.ValidationSummaryItemType;e.Library.addEnum(a,"ValidationSummaryItemType"),function(e){e[e.UpOnly=0]="UpOnly",e[e.DownOnly=1]="DownOnly",e[e.Both=2]="Both"}(e.StretchDirection||(e.StretchDirection={}));var s=e.StretchDirection;e.Library.addEnum(s,"StretchDirection")}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=t.Primitives.ButtonBase,r=function(r){function o(){r.call(this),this.Spin=new e.RoutedEvent,this._IncreaseButton=null,this._DecreaseButton=null,this.DefaultStyleKey=o}return __extends(o,r),o.prototype.OnContentChanged=function(e,t){},o.prototype.OnValidSpinDirectionChanged=function(e){this.UpdateVisualState(!0),this.EnableButtons()},o.prototype.OnSpin=function(e){var n=e.Direction===t.SpinDirection.Increase?t.ValidSpinDirections.Increase:t.ValidSpinDirections.Decrease;if((this.ValidSpinDirection&n)!==n)throw new InvalidOperationException("Invalid Spin Direction");this.Spin.raise(this,e)},o.prototype.OnApplyTemplate=function(){r.prototype.OnApplyTemplate.call(this),this._IncreaseButton&&this._IncreaseButton.Click.off(this.OnIncreaseClick,this),this._IncreaseButton=this.GetTemplateChild("IncreaseButton",n),this._IncreaseButton&&this._IncreaseButton.Click.on(this.OnIncreaseClick,this),this._DecreaseButton&&this._DecreaseButton.Click.off(this.OnDecreaseClick,this),this._DecreaseButton=this.GetTemplateChild("DecreaseButton",n),this._DecreaseButton&&this._DecreaseButton.Click.on(this.OnDecreaseClick,this),this.UpdateVisualState(!1),this.EnableButtons()},o.prototype.OnIncreaseClick=function(e,n){this.OnSpin(new t.SpinEventArgs(t.SpinDirection.Increase))},o.prototype.OnDecreaseClick=function(e,n){this.OnSpin(new t.SpinEventArgs(t.SpinDirection.Decrease))},o.prototype.EnableButtons=function(){this._IncreaseButton&&(this._IncreaseButton.IsEnabled=(this.ValidSpinDirection&t.ValidSpinDirections.Increase)===t.ValidSpinDirections.Increase),this._DecreaseButton&&(this._DecreaseButton.IsEnabled=(this.ValidSpinDirection&t.ValidSpinDirections.Decrease)===t.ValidSpinDirections.Decrease)},o.prototype.GoToStates=function(e){r.prototype.GoToStates.call(this,e),this.GoToStateIncrease(e),this.GoToStateDecrease(e)},o.prototype.GoToStateCommon=function(e){return e(this.IsEnabled?this.IsMouseOver?"MouseOver":"Normal":"Disabled")},o.prototype.GoToStateIncrease=function(e){return e((this.ValidSpinDirection&t.ValidSpinDirections.Increase)===t.ValidSpinDirections.Increase?"IncreaseEnabled":"IncreaseDisabled")},o.prototype.GoToStateDecrease=function(e){return e((this.ValidSpinDirection&t.ValidSpinDirections.Decrease)===t.ValidSpinDirections.Decrease?"DecreaseEnabled":"DecreaseDisabled")},o.prototype.OnMouseEnter=function(e){r.prototype.OnMouseEnter.call(this,e),this.UpdateVisualState()},o.prototype.OnMouseLeave=function(e){r.prototype.OnMouseLeave.call(this,e),this.UpdateVisualState()},o.prototype.OnMouseLeftButtonDown=function(e){this.UpdateVisualState(),r.prototype.OnMouseLeftButtonDown.call(this,e)},o.prototype.OnMouseLeftButtonUp=function(e){r.prototype.OnMouseLeftButtonUp.call(this,e),this.UpdateVisualState()},o.prototype.OnGotFocus=function(e){r.prototype.OnGotFocus.call(this,e),this.UpdateVisualState()},o.prototype.OnLostFocus=function(e){r.prototype.OnLostFocus.call(this,e),this.UpdateVisualState()},o.ContentProperty=DependencyProperty.Register("Content",function(){return Object},o,void 0,function(e,t){return e.OnContentChanged(t.OldValue,t.NewValue)}),o.ValidSpinDirectionProperty=DependencyProperty.Register("ValidSpinDirection",function(){return new e.Enum(t.ValidSpinDirections)},o,t.ValidSpinDirections.Increase,function(e,t){return e.OnValidSpinDirectionChanged(t)}),o}(t.Control);t.Spinner=r,e.Markup.Content(r,r.ContentProperty),t.TemplateVisualStates(r,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"IncreaseStates",Name:"IncreaseEnabled"},{GroupName:"IncreaseStates",Name:"IncreaseDisabled"},{GroupName:"DecreaseStates",Name:"DecreaseEnabled"},{GroupName:"DecreaseStates",Name:"DecreaseDisabled"}),t.TemplateParts(r,{Name:"IncreaseButton",Type:t.Primitives.ButtonBase},{Name:"DecreaseButton",Type:t.Primitives.ButtonBase})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function r(){n.apply(this,arguments),this._IgnoreValueChange=!1,this._TextBox=null,this._Spinner=null,this._Text="",this.ValueChanging=new e.RoutedPropertyChangingEvent,this.ValueChanged=new e.RoutedPropertyChangedEvent,this.Parsing=new e.RoutedEvent,this.ParseError=new e.RoutedEvent}return __extends(r,n),r.prototype.OnSpinnerStyleChanged=function(e,t){},r.prototype._OnValueChanged=function(t){if(!this._IgnoreValueChange){var n=t.OldValue,r=t.NewValue,o=new e.RoutedPropertyChangingEventArgs(t.Property,n,r,!0);if(this.OnValueChanging(o),!o.InCoercion)if(o.Cancel)this._IgnoreValueChange=!0,this.Value=n,this._IgnoreValueChange=!1;else{var i=o.NewValue,a=new e.RoutedPropertyChangedEventArgs(n,i);this.OnValueChanged(a)}}},r.prototype.OnValueChanging=function(e){this.ValueChanging.raise(this,e)},r.prototype.OnValueChanged=function(e){this.ValueChanged.raise(this,e),this.SetTextBoxText()},r.prototype.OnIsEditableChanged=function(e){this._TextBox||(this._TextBox.IsReadOnly=!this.IsEditable)},r.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),this.SetTextBox(this.GetTemplateChild("Text")),this.SetSpinner(this.GetTemplateChild("Spinner")),this.SetTextBoxText(),null!=this._TextBox&&(this._TextBox.IsReadOnly=!this.IsEditable),this.UpdateVisualState(!1)},r.prototype.SetTextBox=function(e){this._TextBox&&(this._TextBox.GotFocus.off(this.TextBox_GotFocus,this),this._TextBox.LostFocus.off(this.TextBox_LostFocus,this)),e instanceof t.TextBox?this._TextBox=e:this._TextBox=null,this._TextBox.GotFocus.on(this.TextBox_GotFocus,this),this._TextBox.LostFocus.on(this.TextBox_LostFocus,this),this._Text=this._TextBox.Text},r.prototype.SetSpinner=function(e){this._Spinner&&this._Spinner.Spin.off(this.Spinner_Spin,this),e instanceof t.Spinner?this._Spinner=e:this._Spinner=null,this._Spinner&&this._Spinner.Spin.on(this.Spinner_Spin,this)},r.prototype.OnKeyDown=function(t){if(n.prototype.OnKeyDown.call(this,t),!t.Handled)switch(t.Key){case e.Input.Key.Enter:this.ProcessUserInput(),t.Handled=!0;break;case e.Input.Key.Up:this.DoIncrement(),t.Handled=!0;break;case e.Input.Key.Down:this.DoDecrement(),t.Handled=!0}},r.prototype.OnMouseWheel=function(e){n.prototype.OnMouseWheel.call(this,e),e.Handled||(e.Delta<0?this.DoDecrement():0<e.Delta&&this.DoIncrement(),e.Handled=!0)},r.prototype.ApplyValue=function(e){var n,r=new t.UpDownParsingEventArgs(e),o=null;try{n=this.ParseValue(e),r.Value=n}catch(i){o=i}try{this.OnParsing(r)}catch(i){}if(null==o){var a=r.Handled?r.Value:n;this.Value;this.Value===a&&this.SetTextBoxText(),this.Value=a}else if(r.Handled)this.Value===r.Value&&this.SetTextBoxText(),this.Value=r.Value;else{var s=new t.UpDownParseErrorEventArgs(e,o);this.OnParseError(s),s.Handled||this.SetTextBoxText()}},r.prototype.OnParseError=function(e){this.ParseError.raise(this,e)},r.prototype.OnParsing=function(e){this.Parsing.raise(this,e)},r.prototype.ParseValue=function(e){},r.prototype.FormatValue=function(){return""},r.prototype.SelectAllText=function(){this._TextBox&&this._TextBox.SelectAll()},r.prototype.SetTextBoxText=function(){this._TextBox&&(this._Text=this.FormatValue()||"",this._TextBox.Text=this._Text,this._TextBox.SelectionStart=this._Text.length)},r.prototype.TextBox_LostFocus=function(e,t){this.ProcessUserInput()},r.prototype.TextBox_GotFocus=function(e,t){this.SelectAllText()},r.prototype.Spinner_Spin=function(e,t){this._TextBox&&this.ProcessUserInput(),this.OnSpin(t)},r.prototype.OnSpin=function(e){e.Direction===t.SpinDirection.Increase?this.DoIncrement():this.DoDecrement()},r.prototype.ProcessUserInput=function(){if(this._TextBox&&this._Text!==this._TextBox.Text){var e=this._TextBox.SelectionStart;this._Text=this._TextBox.Text,this.ApplyValue(this._Text),e<this._TextBox.Text.length&&(this._TextBox.SelectionStart=e)}},r.prototype.DoDecrement=function(){this._Spinner&&(this._Spinner.ValidSpinDirection&t.ValidSpinDirections.Decrease)!==t.ValidSpinDirections.Decrease||this.OnDecrement()},r.prototype.OnDecrement=function(){},r.prototype.DoIncrement=function(){this._Spinner&&(this._Spinner.ValidSpinDirection&t.ValidSpinDirections.Increase)!==t.ValidSpinDirections.Increase||this.OnIncrement()},r.prototype.OnIncrement=function(){},r.SpinnerStyleProperty=DependencyProperty.Register("SpinnerStyle",function(){return e.Style},r,void 0,function(e,t){return e.OnSpinnerStyleChanged(t.OldValue,t.NewValue)}),r.IsEditableProperty=DependencyProperty.Register("IsEditable",function(){return Boolean},r,!0,function(e,t){return e.OnIsEditableChanged(t)}),r}(t.Control);t.UpDownBase=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"}),t.TemplateParts(n,{Name:"Text",Type:t.TextBox},{Name:"Spinner",Type:t.Spinner})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(e,n,r){switch(r){case t.InvalidInputAction.UseFallbackItem:case t.InvalidInputAction.TextBoxCannotLoseFocus:return!0;default:return!1}}function r(e,t,n){return e?n===(e.GetDynamicValue(t)||""):n===t.toString()}var o=function(o){function i(){var n=this;o.call(this),this.ValueChanging=new e.RoutedPropertyChangingEvent,this.ParseError=new e.RoutedEvent,this._ValueBindingEvaluator=null,this._CanEditByFocus=!1,this.DefaultStyleKey=i,Object.defineProperty(this,"Items",{value:new t.Internal.ObservableObjectCollection,writable:!1}),this.Items.CollectionChanged.on(this._OnItemsChanged,this),this._Coercer=new t.Internal.DomainCoercer(this,function(e){return n.SetCurrentValue(i.ValueProperty,e)},function(e){return n.SetCurrentValue(i.CurrentIndexProperty,e)})}return __extends(i,o),i.prototype.OnValueChanged=function(e,t){},i.prototype.OnCurrentIndexChanged=function(e,t){this.UpdateValidSpinDirection()},i.prototype._OnIsCyclicChanged=function(e){this.UpdateValidSpinDirection()},i.prototype._OnItemsSourceChanged=function(t,n){var r=e.Collections.INotifyCollectionChanged_.as(t);if(r&&r.CollectionChanged.off(this._ItemsSourceModified,this),this.Items.IsReadOnly=!1,this.Items.Clear(),n){var o,i=nullstone.IEnumerable_.as(n);if(i){var a=i.getEnumerator();for(o=[];a.moveNext();)o.push(a.current)}else n instanceof Array&&(o=n);o&&(this.Items.AddRange(o),this.Items.IsReadOnly=!0),r=e.Collections.INotifyCollectionChanged_.as(n),r&&r.CollectionChanged.on(this._ItemsSourceModified,this)}},i.prototype._ItemsSourceModified=function(t,n){var r,o=t;switch(this.Items.IsReadOnly=!1,n.Action){case e.Collections.CollectionChangedAction.Add:r=n.NewStartingIndex;for(var i=nullstone.IEnumerator_.fromArray(n.NewItems);i.moveNext();)this.Items.Insert(r,i.current),r++;break;case e.Collections.CollectionChangedAction.Remove:for(var i=nullstone.IEnumerator_.fromArray(n.OldItems);i.moveNext();)this.Items.RemoveAt(n.OldStartingIndex);break;case e.Collections.CollectionChangedAction.Replace:r=n.NewStartingIndex;for(var i=nullstone.IEnumerator_.fromArray(n.NewItems);i.moveNext();)this.Items.SetValueAt(r,i.current),r++;break;case e.Collections.CollectionChangedAction.Reset:this.Items.Clear(),this.Items.AddRange(o.ToArray())}this.Items.IsReadOnly=!0},i.prototype._OnItemsChanged=function(e,t){this._Coercer.UpdateTextBoxText()},Object.defineProperty(i.prototype,"ValueMemberPath",{get:function(){var e=this.ValueMemberBinding;return e?e.Path.Path:null},set:function(t){var n=this.ValueMemberBinding;if(t)if(null!=n){var r=new e.Data.Binding(t);r.Converter=n.Converter,r.ConverterCulture=n.ConverterCulture,r.ConverterParameter=n.ConverterParameter,this.ValueMemberBinding=r}else this.ValueMemberBinding=new e.Data.Binding(t);else{if(!n)return;var r=new e.Data.Binding;r.Converter=n.Converter,r.ConverterCulture=n.ConverterCulture,r.ConverterParameter=n.ConverterParameter,this.ValueMemberBinding=r}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ValueMemberBinding",{get:function(){var e=this._ValueBindingEvaluator;return e?e.ValueBinding:null},set:function(e){this._ValueBindingEvaluator=new t.Internal.BindingSourceEvaluator(e)},enumerable:!0,configurable:!0}),i.prototype.OnApplyTemplate=function(){o.prototype.OnApplyTemplate.call(this),this._SpinFlow&&this._SpinFlow.Dispose(),this._SpinFlow=new t.Internal.SpinFlow(this,this.GetTemplateChild("Spinner",t.Spinner)),this._Coercer.Detach(),this._Coercer.Attach(this.GetTemplateChild("Text",t.TextBox)),this.UpdateValidSpinDirection(),this.UpdateVisualState()},i.prototype.OnGotFocus=function(e){o.prototype.OnGotFocus.call(this,e),this.UpdateVisualState(),this.IsEnabled&&this.TryEnterEditMode()},i.prototype.OnLostFocus=function(e){o.prototype.OnLostFocus.call(this,e),this.UpdateVisualState(),this.IsEnabled&&this._Coercer.EscapeFocus()},i.prototype.OnMouseEnter=function(e){o.prototype.OnMouseEnter.call(this,e),this.UpdateVisualState()},i.prototype.OnMouseLeave=function(e){o.prototype.OnMouseLeave.call(this,e),this.UpdateVisualState()},i.prototype.OnMouseLeftButtonDown=function(e){o.prototype.OnMouseLeftButtonDown.call(this,e),this.UpdateVisualState()},i.prototype.OnMouseLeftButtonUp=function(e){o.prototype.OnMouseLeftButtonUp.call(this,e),this.UpdateVisualState(),this.IsEnabled&&!this._Coercer.IsEditing&&(this.Focus(),this.TryEnterEditMode())},i.prototype.GoToStates=function(e){o.prototype.GoToStates.call(this,e),this.GoToStateEditing(e),this.GoToStateValid(e)},i.prototype.GoToStateEditing=function(e){return e(this._Coercer.IsEditing?"Edit":"Display")},i.prototype.GoToStateValid=function(e){return e(this._Coercer.IsInvalidInput?"InvalidDomain":"ValidDomain")},i.prototype.UpdateValidSpinDirection=function(){if(this._SpinFlow){var e=this.IsCyclic,t=this.CurrentIndex;this._SpinFlow.UpdateValid(e||t>0,e||t<this.Items.Count-1)}},i.prototype.TryEnterEditMode=function(){this._Coercer.IsEditing||!this._CanEditByFocus&&this.IsEditable&&(this._Coercer.IsEditing=!0)},i.prototype.OnIsEditingChanged=function(e){this.UpdateVisualState()},i.prototype.OnIsInvalidInputChanged=function(e){this.UpdateVisualState()},i.prototype.OnSpin=function(){this._Coercer.ProcessUserInput()},i.prototype.OnIncrement=function(){var e=this;this.CurrentIndex<this.Items.Count-1?this.CurrentIndex++:this.IsCyclic&&(this.CurrentIndex=0),this._Coercer.IsInvalidInput=!1,this._CanEditByFocus=!0,this.Focus(),window.setTimeout(function(){return e._CanEditByFocus=!1},1)},i.prototype.OnDecrement=function(){var e=this;this.CurrentIndex>0?this.CurrentIndex--:this.IsCyclic&&(this.CurrentIndex=this.Items.Count-1),this._Coercer.IsInvalidInput=!1,this._CanEditByFocus=!0,this.Focus(),window.setTimeout(function(){return e._CanEditByFocus=!1},1)},i.prototype.TryParseValue=function(e,n){if(!e)return n.Value=this.Value,!0;for(var o=this._ValueBindingEvaluator,i=this.Items.getEnumerator();i.moveNext()&&null==n.Value;)n.Value=r(o,i.current,e);if(null!=n.Value)return!0;if(n.Value=this.Value,this.InvalidInputAction===t.InvalidInputAction.TextBoxCannotLoseFocus)return!1;if(this.InvalidInputAction===t.InvalidInputAction.UseFallbackItem&&(n.Value=this.FallbackItem,null==n.Value||!this.Items.Contains(n.Value)))throw new ArgumentException("Cannot parse value.");return!0},i.prototype.FormatValue=function(){var e=this.Value;if(!e)return"";if(!this.Items.Contains(e))return"";try{var t=this._ValueBindingEvaluator;t&&(e=t.GetDynamicValue(e))}catch(n){}return"string"==typeof e?e:""},i.ValueProperty=DependencyProperty.Register("Value",function(){return Object},i,null,function(e,t){return e._Coercer.OnValueChanged(t.OldValue,t.NewValue)}),i.IsEditableProperty=DependencyProperty.Register("IsEditable",function(){return Boolean},i,!1,function(e,t){return e._Coercer.UpdateIsEditable()}),i.SpinnerStyleProperty=DependencyProperty.Register("SpinnerStyle",function(){return e.Style},i),i.CurrentIndexProperty=DependencyProperty.Register("CurrentIndex",function(){return Number},i,-1,function(e,t){return e._Coercer.OnCurrentIndexChanged(t.OldValue,t.NewValue)}),i.IsCyclicProperty=DependencyProperty.Register("IsCyclic",function(){return Boolean},i,!1,function(e,t){return e._OnIsCyclicChanged(t)}),i.InvalidInputActionProperty=DependencyProperty.RegisterFull("InvalidInputAction",function(){return new e.Enum(t.InvalidInputAction)},i,t.InvalidInputAction.UseFallbackItem,void 0,void 0,!1,n,!0),i.FallbackItemProperty=DependencyProperty.Register("FallbackItem",function(){return Object},i,null),i.ItemsSourceProperty=DependencyProperty.Register("ItemsSource",function(){return nullstone.IEnumerable_},i,void 0,function(e,t){return e._OnItemsSourceChanged(t.OldValue,t.NewValue)}),i.ItemTemplateProperty=DependencyProperty.Register("ItemTemplate",function(){return e.DataTemplate},i),i}(t.Control);t.DomainUpDown=o,t.TemplateVisualStates(o,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"},{GroupName:"ValidationStates",Name:"InvalidFocused"},{GroupName:"DomainStates",Name:"ValidDomain"},{GroupName:"DomainStates",Name:"InvalidDomain"})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=10,r=function(r){function o(){r.call(this),this._HorizontalTemplate=null,this._VerticalTemplate=null,this._DragStart=null,this._IsDragging=!1,this.DefaultStyleKey=o,this._Helper=new t.Internal.GridSplitterResizer(this),this.LayoutUpdated.on(this._OnLayoutUpdated,this)}return __extends(o,r),o.prototype.OnApplyTemplate=function(){r.prototype.OnApplyTemplate.call(this),this._HorizontalTemplate=this.GetTemplateChild("HorizontalTemplate",e.FrameworkElement),this._VerticalTemplate=this.GetTemplateChild("VerticalTemplate",e.FrameworkElement),this._Helper.UpdateResizeDirection(this),this._OnResizeDirectionChanged(),this.UpdateVisualState()},o.prototype._OnLayoutUpdated=function(e,t){this._Helper&&this._Helper.UpdateResizeDirection(this)&&this._OnResizeDirectionChanged()},o.prototype._OnResizeDirectionChanged=function(){var n=this._Helper.Direction===t.Internal.GridResizeDirection.Columns;this.Cursor=n?e.CursorType.SizeWE:e.CursorType.SizeNS;var r=this._HorizontalTemplate;r&&(r.Visibility=n?e.Visibility.Collapsed:e.Visibility.Visible);var o=this._VerticalTemplate;o&&(o.Visibility=n?e.Visibility.Visible:e.Visibility.Collapsed)},o.prototype.OnGotFocus=function(e){r.prototype.OnGotFocus.call(this,e),this.UpdateVisualState()},o.prototype.OnLostFocus=function(e){r.prototype.OnLostFocus.call(this,e),this.UpdateVisualState()},o.prototype.OnKeyDown=function(t){if(r.prototype.OnKeyDown.call(this,t),t.Key===e.Input.Key.Escape){if(!this._Helper)return;return this._Helper=null,void(t.Handled=!0)}if(this.IsFocused&&this.IsEnabled){var o=0,i=0;switch(t.Key){case e.Input.Key.Left:o=-n;break;case e.Input.Key.Up:i=-n;break;case e.Input.Key.Right:o=n;break;case e.Input.Key.Down:i=n}this.FlowDirection===e.FlowDirection.RightToLeft?t.Handled=this._HandleMove(-o,i,!0):t.Handled=this._HandleMove(o,i,!0)}},o.prototype.OnMouseLeftButtonDown=function(e){r.prototype.OnMouseLeftButtonDown.call(this,e),this.IsEnabled&&(this._IsDragging=this.CaptureMouse(),this._IsDragging&&(this._DragStart=this._GetTransformedPos(e),this.Focus(),this.InitHelper()))},o.prototype.OnMouseLeftButtonUp=function(e){r.prototype.OnMouseLeftButtonUp.call(this,e),this.ReleaseMouseCapture(),this._IsDragging=!1,this._Helper=null,this.UpdateVisualState()},o.prototype.OnMouseMove=function(e){if(r.prototype.OnMouseMove.call(this,e),this._IsDragging){var t=this._GetTransformedPos(e);t&&this._HandleMove(t.x-this._DragStart.x,t.y-this._DragStart.y,!1)}},o.prototype.InitHelper=function(){var e=this.VisualParent;e instanceof t.Grid&&(this._Helper=new t.Internal.GridSplitterResizer(this),this._Helper.Setup(this,e)||(this._Helper=null))},o.prototype._HandleMove=function(e,t,n){if(n){if(this._Helper)return!1;this.InitHelper()}return this._Helper?((!this._Helper.Move(this.VisualParent,e,t)||n)&&(this._Helper=null),!0):!1},o.prototype._GetTransformedPos=function(e){return this.RenderTransform?this.RenderTransform.Transform(e.GetPosition(this)):e.GetPosition(this)},o}(t.Control);t.GridSplitter=r}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(e,t){return e.ReadLocalValue(t)===DependencyProperty.UnsetValue}var r=function(r){function o(){r.call(this),this._HeaderIsItem=!1,this.DefaultStyleKey=o,this._ItemsControlHelper=new t.Internal.ItemsControlHelper(this)}return __extends(o,r),o.prototype.OnHeaderChanged=function(e,t){},o.prototype.OnHeaderTemplateChanged=function(e,t){},o.prototype.OnItemContainerStyleChanged=function(e){this._ItemsControlHelper.UpdateItemContainerStyle(e.NewValue)},o.prototype.OnApplyTemplate=function(){r.prototype.OnApplyTemplate.call(this),this._ItemsControlHelper.OnApplyTemplate()},o.prototype.PrepareContainerForItem=function(n,i){var a=n;a instanceof t.Control||(a=null);var s=this.ItemContainerStyle;null!=s&&null!=a&&null==a.Style&&a.SetValue(e.FrameworkElement.StyleProperty,s);var l=n;l instanceof o&&o.PrepareHeaderedItemsControlContainer(l,i,this,s),r.prototype.PrepareContainerForItem.call(this,n,i)},o.PrepareHeaderedItemsControlContainer=function(r,i,a,s){if(r!==i){var l=a.ItemTemplate;null!=l&&r.SetValue(t.ItemsControl.ItemTemplateProperty,l),null!=s&&n(r,o.ItemContainerStyleProperty)&&r.SetValue(o.ItemContainerStyleProperty,s),(r._HeaderIsItem||n(r,o.HeaderProperty))&&(r.Header=i,r._HeaderIsItem=!0),null!=l&&r.SetValue(o.HeaderTemplateProperty,l),null!=s&&null==r.Style&&r.SetValue(e.FrameworkElement.StyleProperty,s);var u=l;if(u instanceof e.HierarchicalDataTemplate){var p=u.GetBindingExpression(e.HierarchicalDataTemplate.ItemsSourceProperty);if(p){var c=new e.Data.Binding(p.ParentBinding);c.Source=r.Header,r.SetBinding(t.ItemsControl.ItemsSourceProperty,c)}void 0!==u.ItemTemplate&&r.ItemTemplate===l&&(r.ClearValue(t.ItemsControl.ItemTemplateProperty),null!=u.ItemTemplate&&(r.ItemTemplate=u.ItemTemplate)),void 0!==u.ItemContainerStyle&&r.ItemContainerStyle===s&&(r.ClearValue(o.ItemContainerStyleProperty),null!=u.ItemContainerStyle&&(r.ItemContainerStyle=u.ItemContainerStyle));
}}},o.HeaderProperty=DependencyProperty.Register("Header",function(){return Object},o,void 0,function(e,t){return e.OnHeaderChanged(t.OldValue,t.NewValue)}),o.HeaderTemplateProperty=DependencyProperty.Register("HeaderTemplate",function(){return e.DataTemplate},o,void 0,function(e,t){return e.OnHeaderTemplateChanged(t.OldValue,t.NewValue)}),o.ItemContainerStyleProperty=DependencyProperty.Register("ItemContainerStyle",function(){return e.Style},o,void 0,function(e,t){return e.OnItemContainerStyleChanged(t)}),o}(t.ItemsControl);t.HeaderedItemsControl=r}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function r(){n.call(this),this.Click=new e.RoutedEvent,this.DefaultStyleKey=r,this.UpdateIsEnabled()}return __extends(r,n),r.prototype.OnCommandChanged=function(t){var n=e.Input.ICommand_.as(t.OldValue);n&&n.CanExecuteChanged.off(this._CanExecuteChanged,this);var r=e.Input.ICommand_.as(t.NewValue);r&&r.CanExecuteChanged.on(this._CanExecuteChanged,this),this.UpdateIsEnabled()},r.prototype._CanExecuteChanged=function(e,t){this.UpdateIsEnabled()},r.prototype.OnCommandParameterChanged=function(e){this.UpdateIsEnabled()},r.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),this.UpdateVisualState(!1)},r.prototype.UpdateIsEnabled=function(){this.IsEnabled=null==this.Command||this.Command.CanExecute(this.CommandParameter),this.UpdateVisualState(!0)},r.prototype.OnGotFocus=function(e){n.prototype.OnGotFocus.call(this,e),this.UpdateVisualState(!0)},r.prototype.OnLostFocus=function(e){n.prototype.OnLostFocus.call(this,e),this.UpdateVisualState(!0)},r.prototype.OnMouseEnter=function(e){n.prototype.OnMouseEnter.call(this,e),this.Focus(),this.UpdateVisualState(!0)},r.prototype.OnMouseLeave=function(e){n.prototype.OnMouseLeave.call(this,e),null!=this.ParentMenuBase&&this.ParentMenuBase.Focus(),this.UpdateVisualState(!0)},r.prototype.OnMouseLeftButtonDown=function(e){e.Handled||(this.OnClick(),e.Handled=!0),n.prototype.OnMouseLeftButtonDown.call(this,e)},r.prototype.OnMouseRightButtonDown=function(e){e.Handled||(this.OnClick(),e.Handled=!0),n.prototype.OnMouseRightButtonDown.call(this,e)},r.prototype.OnKeyDown=function(t){t.Handled||e.Input.Key.Enter!==t.Key||(this.OnClick(),t.Handled=!0),n.prototype.OnKeyDown.call(this,t)},r.prototype.OnClick=function(){var n=this.ParentMenuBase;n instanceof t.ContextMenu&&n.ChildMenuItemClicked(),this.Click.raise(this,new e.RoutedEventArgs),null!=this.Command&&this.Command.CanExecute(this.CommandParameter)&&this.Command.Execute(this.CommandParameter)},r.prototype.GoToStateCommon=function(e){return e(this.IsEnabled?"Normal":"Disabled")},r.CommandProperty=DependencyProperty.Register("Command",function(){return e.Input.ICommand_},r,void 0,function(e,t){return e.OnCommandChanged(t)}),r.CommandParameterProperty=DependencyProperty.Register("CommandParameter",function(){return Object},r,void 0,function(e,t){return e.OnCommandParameterChanged(t)}),r.IconProperty=DependencyProperty.Register("Icon",function(){return Object},r),r}(e.Controls.HeaderedItemsControl);t.MenuItem=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function r(){var o=this;n.call(this),this.Parsing=new e.RoutedEvent,this.ParseError=new e.RoutedEvent,this.DefaultStyleKey=r,this._Coercer=new t.Internal.FormattedRangeCoercer(this,function(e){return o.SetCurrentValue(r.MaximumProperty,e)},function(e){return o.SetCurrentValue(r.ValueProperty,e)},function(){o._Formatter&&o._Formatter.UpdateTextBoxText()})}return __extends(r,n),r.prototype.OnMinimumChanged=function(e,t){this.UpdateValidSpinDirection()},r.prototype.OnMaximumChanged=function(e,t){this.UpdateValidSpinDirection()},r.prototype.OnValueChanged=function(e,t){this.UpdateValidSpinDirection(),this._Formatter&&this._Formatter.UpdateTextBoxText()},r.prototype.OnIncrementChanged=function(e,t){},r.prototype.OnDecimalPlacesChanged=function(e,t){},r.prototype.OnApplyTemplate=function(){var e=this;n.prototype.OnApplyTemplate.call(this),this._SpinFlow&&this._SpinFlow.Dispose(),this._SpinFlow=new t.Internal.SpinFlow(this,this.GetTemplateChild("Spinner",t.Spinner)),this._Formatter&&this._Formatter.Dispose(),this._Formatter=new t.Internal.TextBoxFormatter(this,this.GetTemplateChild("Text",t.TextBox),function(t){return e.SetCurrentValue(r.ValueProperty,t)}),this.UpdateValidSpinDirection(),this.UpdateVisualState(!1)},r.prototype.UpdateValidSpinDirection=function(){if(this._SpinFlow){var e=this.Value;this._SpinFlow.UpdateValid(e<this.Maximum,e>this.Minimum)}},r.prototype.ParseValue=function(e){return parseFloat(e)},r.prototype.FormatValue=function(e){return e.toFixed(this.DecimalPlaces)},r.prototype.OnSpin=function(){this._Formatter.ProcessUserInput()},r.prototype.OnIncrement=function(){this._Coercer.AddToValue(this.Increment)},r.prototype.OnDecrement=function(){this._Coercer.AddToValue(-this.Increment)},r.MinimumProperty=DependencyProperty.Register("Minimum",function(){return Number},r,0,function(e,t){return e._Coercer.OnMinimumChanged(t.OldValue,t.NewValue)}),r.MaximumProperty=DependencyProperty.Register("Maximum",function(){return Number},r,100,function(e,t){return e._Coercer.OnMaximumChanged(t.OldValue,t.NewValue)}),r.ValueProperty=DependencyProperty.Register("Value",function(){return Number},r,0,function(e,t){return e._Coercer.OnValueChanged(t.OldValue,t.NewValue)}),r.IncrementProperty=DependencyProperty.Register("Increment",function(){return Number},r,1,function(e,t){return e.OnIncrementChanged(t.OldValue,t.NewValue)}),r.DecimalPlacesProperty=DependencyProperty.Register("DecimalPlaces",function(){return Number},r,0,function(e,t){return e._Coercer.OnDecimalPlacesChanged(t.OldValue,t.NewValue)}),r.SpinnerStyleProperty=DependencyProperty.Register("SpinnerStyle",function(){return e.Style},r),r.IsEditableProperty=DependencyProperty.Register("IsEditable",function(){return Boolean},r,!0,function(e,t){return e._Formatter.UpdateIsEditable()}),r}(t.Control);t.NumericUpDown=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"},{GroupName:"ValidationStates",Name:"InvalidFocused"}),t.TemplateParts(n,{Name:"Text",Type:t.TextBox},{Name:"Spinner",Type:t.Spinner})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t=function(e){function t(){e.call(this),this.DefaultStyleKey=t}return __extends(t,e),t}(e.Control);e.Separator=t}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(e){function t(t){e.call(this),Object.defineProperty(this,"Direction",{value:t,writable:!1})}return __extends(t,e),t}(e.RoutedEventArgs);t.SpinEventArgs=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function r(){n.call(this),this.SelectionChanged=new e.RoutedEvent,this._UpdateIndex=!0,this._DesiredIndex=0,this.DefaultStyleKey=r}return __extends(r,n),r.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),null!=this._ElementTabPanelTop&&this._ElementTabPanelTop.Children.Clear(),null!=this._ElementTabPanelBottom&&this._ElementTabPanelBottom.Children.Clear(),null!=this._ElementTabPanelLeft&&this._ElementTabPanelLeft.Children.Clear(),null!=this._ElementTabPanelRight&&this._ElementTabPanelRight.Children.Clear();var r=this._GetContentHost(this.TabStripPlacement);null!=r&&(r.Content=null),this._ElementTemplateTop=this.GetTemplateChild("TemplateTop",e.FrameworkElement),this._ElementTemplateBottom=this.GetTemplateChild("TemplateBottom",e.FrameworkElement),this._ElementTemplateLeft=this.GetTemplateChild("TemplateLeft",e.FrameworkElement),this._ElementTemplateRight=this.GetTemplateChild("TemplateRight",e.FrameworkElement),this._ElementTabPanelTop=this.GetTemplateChild("TabPanelTop",t.TabPanel),this._ElementTabPanelBottom=this.GetTemplateChild("TabPanelBottom",t.TabPanel),this._ElementTabPanelLeft=this.GetTemplateChild("TabPanelLeft",t.TabPanel),this._ElementTabPanelRight=this.GetTemplateChild("TabPanelRight",t.TabPanel),t.TabPanel.setTabAlignment(this._ElementTabPanelTop,t.Dock.Top),t.TabPanel.setTabAlignment(this._ElementTabPanelBottom,t.Dock.Bottom),t.TabPanel.setTabAlignment(this._ElementTabPanelLeft,t.Dock.Left),t.TabPanel.setTabAlignment(this._ElementTabPanelRight,t.Dock.Right),this._ElementContentTop=this.GetTemplateChild("ContentTop",t.ContentPresenter),this._ElementContentBottom=this.GetTemplateChild("ContentBottom",t.ContentPresenter),this._ElementContentLeft=this.GetTemplateChild("ContentLeft",t.ContentPresenter),this._ElementContentRight=this.GetTemplateChild("ContentRight",t.ContentPresenter);for(var o=this.Items.getEnumerator();o.moveNext();){var i=o.current;i instanceof t.TabItem||this._ThrowInvalidTabItem(i),this._AddToTabPanel(i)}this.SelectedIndex>=0&&this.UpdateSelectedContent(this.SelectedContent),this.UpdateTabPanelLayout(this.TabStripPlacement,this.TabStripPlacement),this.UpdateVisualState(!1)},r.prototype.OnSelectedItemChanged=function(e){var t=e.OldValue,n=e.NewValue,r=null==n?-1:this.Items.IndexOf(n);null!=n&&-1===r?this.SelectedItem=t:(this.SelectedIndex=r,this.SelectItem(t,n))},r.prototype.OnSelectedIndexChanged=function(e){var t=e.NewValue,n=e.OldValue;if(-1>t)throw new ArgumentException("'"+t.toString()+"' is not a valid value for property 'SelectedIndex'");if(this._UpdateIndex?this._DesiredIndex=t:this._UpdateIndex||(this._UpdateIndex=!0),t>=this.Items.Count)this._UpdateIndex=!1,this.SelectedIndex=n;else{var r;if(t>=0&&t<this.Items.Count&&(r=this.Items.GetValueAt(t)),this.SelectedItem===r)return;this.SelectedItem=r}},r.prototype.OnSelectedContentChanged=function(e){this.UpdateSelectedContent(e.NewValue)},r.prototype.OnTabStripPlacementPropertyChanged=function(e){this.UpdateTabPanelLayout(e.OldValue,e.NewValue);for(var t,n=this.Items.getEnumerator();n.moveNext();)t=n.current,null!=t&&t.UpdateVisualState()},r.prototype.OnItemsChanged=function(r){switch(n.prototype.OnItemsChanged.call(this,r),r.Action){case e.Collections.CollectionChangedAction.Add:for(var o=-1,i=r.NewItems.length,a=0;i>a;a++){var s=r.NewItems[a],l=s;l instanceof t.TabItem||this._ThrowInvalidTabItem(l);var u=this.Items.IndexOf(l);this._InsertIntoTabPanel(u,l),l.IsSelected?o=u:this.SelectedItem!==this._GetItemAtIndex(this.SelectedIndex)?o=this.Items.IndexOf(this.SelectedItem):this._DesiredIndex<this.Items.Count&&this._DesiredIndex>=0&&(o=this._DesiredIndex),l.UpdateVisualState()}if(-1===o){for(var p=this.Items.getEnumerator();p.moveNext();){var l=p.current;if(l instanceof t.TabItem||this._ThrowInvalidTabItem(l),l.IsSelected)return}if(this.Items.Count<=1){var c=this.Items.GetValueAt(0),h=c.ReadLocalValue(t.TabItem.IsSelectedProperty);h!==!1&&(o=0)}else o=0}this.SelectedItem=this._GetItemAtIndex(o),this.SelectedIndex=o;break;case e.Collections.CollectionChangedAction.Remove:for(var l,i=r.OldItems.length,a=0;i>a;a++)l=r.OldItems[a],this._RemoveFromTabPanel(l),0===this.Items.Count?this.SelectedIndex=-1:this.Items.Count<=this.SelectedIndex?this.SelectedIndex=this.Items.Count-1:this.SelectedItem=this._GetItemAtIndex(this.SelectedIndex);break;case e.Collections.CollectionChangedAction.Reset:this._ClearTabPanel(),this.SelectedIndex=-1;for(var l,p=this.Items.getEnumerator();p.moveNext();)l=p.current,l instanceof t.TabItem||this._ThrowInvalidTabItem(l),this._AddToTabPanel(l),l.IsSelected&&(this.SelectedItem=l);if(-1!==this.SelectedIndex||this.Items.Count<=0)break;this.SelectedIndex=0}},r.prototype.OnKeyDown=function(t){if(n.prototype.OnKeyDown.call(this,t),!t.Handled){var r;switch(t.Key){case e.Input.Key.End:r=this._FindEndTabItem();break;case e.Input.Key.Home:r=this._FindHomeTabItem();break;default:return}null!=r&&r!==this.SelectedItem&&(t.Handled=!0,this.SelectedItem=r,r.Focus())}},r.prototype._FindEndTabItem=function(){for(var t=this.Items,n=t.Count,r=null,o=n-1;o>=0;o--)if(r=t.GetValueAt(o),r.IsEnabled&&r.Visibility===e.Visibility.Visible)return r;return null},r.prototype._FindHomeTabItem=function(){for(var t=this.Items,n=t.Count,r=null,o=0;n>o;o++)if(r=t.GetValueAt(o),r.IsEnabled&&r.Visibility===e.Visibility.Visible)return r;return null},r.prototype.SelectItem=function(e,n){if(null==n){var o=this._GetContentHost(this.TabStripPlacement);null!=o&&(o.Content=null),this.SetValue(r.SelectedContentProperty,null)}for(var i,a=this.Items.getEnumerator();a.moveNext();){var i=a.current;i instanceof t.TabItem||this._ThrowInvalidTabItem(i),i!==n&&i.IsSelected?i.IsSelected=!1:i===n&&(i.IsSelected=!0,this.SetValue(r.SelectedContentProperty,i.Content))}var s=[];null!=e&&s.push(e);var l=[];null!=n&&l.push(n);var u=new t.Primitives.SelectionChangedEventArgs(s,l);this.OnSelectionChanged(u),this.SelectionChanged.raise(this,u)},r.prototype.OnSelectionChanged=function(e){},r.prototype.UpdateTabPanelLayout=function(n,r){var o=this._GetTemplate(n),i=this._GetTemplate(r),a=this._GetTabPanel(n),s=this._GetTabPanel(r),l=this._GetContentHost(n),u=this._GetContentHost(r);if(n!==r){if(null!=o&&(o.Visibility=e.Visibility.Collapsed),null!=a&&a.Children.Clear(),null!=s)for(var p,c=this.Items.getEnumerator();c.moveNext();)p=c.current,p instanceof t.TabItem||this._ThrowInvalidTabItem(p),this._AddToTabPanel(p);null!=l&&(l.Content=null),null!=u&&(u.Content=this.SelectedContent)}null!=i&&(i.Visibility=e.Visibility.Visible)},r.prototype.UpdateSelectedContent=function(e){var n=this.SelectedItem;if(n instanceof t.TabItem){var r=this._GetContentHost(this.TabStripPlacement);null!=r&&(r.HorizontalAlignment=n.HorizontalContentAlignment,r.VerticalAlignment=n.VerticalContentAlignment,r.ContentTemplate=n.ContentTemplate,r.Content=e)}},r.prototype.EnsureLanguageBinding=function(t){if(null!=t){var n=t.Content;if(n instanceof e.FrameworkElement&&n.ReadLocalValue(e.FrameworkElement.LanguageProperty)===DependencyProperty.UnsetValue){var r=new e.Data.Binding("Language");r.Source=this,n.SetBinding(e.FrameworkElement.LanguageProperty,r)}}},r.prototype.ClearLanguageBinding=function(t){if(null!=t){var n=t.Content;n instanceof e.FrameworkElement&&n.ReadLocalValue(e.FrameworkElement.LanguageProperty)===DependencyProperty.UnsetValue&&n.ClearValue(e.FrameworkElement.LanguageProperty)}},r.prototype._AddToTabPanel=function(e){var t=this._GetTabPanel(this.TabStripPlacement);t&&!t.Children.Contains(e)&&(t.Children.Add(e),this.EnsureLanguageBinding(e))},r.prototype._InsertIntoTabPanel=function(e,t){var n=this._GetTabPanel(this.TabStripPlacement);n&&!n.Children.Contains(t)&&n.Children.Insert(e,t)},r.prototype._RemoveFromTabPanel=function(e){var t=this._GetTabPanel(this.TabStripPlacement);t&&t.Children.Contains(e)&&t.Children.Remove(e)},r.prototype._ClearTabPanel=function(){var e=this._GetTabPanel(this.TabStripPlacement);if(e){for(var t=e.Children.getEnumerator();t.moveNext();){var n=t.current;null!=n&&this.ClearLanguageBinding(n)}e.Children.Clear()}},r.prototype._GetTabPanel=function(e){switch(e){case t.Dock.Left:return this._ElementTabPanelLeft;case t.Dock.Top:return this._ElementTabPanelTop;case t.Dock.Right:return this._ElementTabPanelRight;case t.Dock.Bottom:return this._ElementTabPanelBottom;default:return null}},r.prototype._GetTemplate=function(e){switch(e){case t.Dock.Left:return this._ElementTemplateLeft;case t.Dock.Top:return this._ElementTemplateTop;case t.Dock.Right:return this._ElementTemplateRight;case t.Dock.Bottom:return this._ElementTemplateBottom;default:return null}},r.prototype._GetContentHost=function(e){switch(e){case t.Dock.Left:return this._ElementContentLeft;case t.Dock.Top:return this._ElementContentTop;case t.Dock.Right:return this._ElementContentRight;case t.Dock.Bottom:return this._ElementContentBottom;default:return null}},r.prototype._GetItemAtIndex=function(e){if(0>e||e>=this.Items.Count)return null;var n=this.Items.GetValueAt(e);return n instanceof t.TabItem?n:void 0},r.prototype._ThrowInvalidTabItem=function(e){var t="object";try{t=e.constructor._TypeName}catch(n){}throw new ArgumentException("Unable to cast object of type '"+t+"' to type 'System.Windows.Controls.TabItem'.")},r.SelectedItemProperty=DependencyProperty.Register("SelectedItem",function(){return Object},r,null,function(e,t){return e.OnSelectedItemChanged(t)}),r.SelectedIndexProperty=DependencyProperty.Register("SelectedIndex",function(){return Number},r,-1,function(e,t){return e.OnSelectedIndexChanged(t)}),r.SelectedContentProperty=DependencyProperty.Register("SelectedContent",function(){return Object},r,null,function(e,t){return e.OnSelectedContentChanged(t)}),r.TabStripPlacementProperty=DependencyProperty.Register("TabStripPlacement",function(){return new e.Enum(t.Dock)},r,t.Dock.Top,function(e,t){return e.OnTabStripPlacementPropertyChanged(t)}),r}(t.ItemsControl);t.TabControl=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"}),t.TemplateParts(n,{Name:"TemplateLeft",Type:e.FrameworkElement},{Name:"ContentLeft",Type:t.ContentPresenter},{Name:"TabPanelLeft",Type:t.TabPanel},{Name:"TemplateTop",Type:e.FrameworkElement},{Name:"ContentTop",Type:t.ContentPresenter},{Name:"TabPanelTop",Type:t.TabPanel},{Name:"TemplateRight",Type:e.FrameworkElement},{Name:"ContentRight",Type:t.ContentPresenter},{Name:"TabPanelRight",Type:t.TabPanel},{Name:"TemplateBottom",Type:e.FrameworkElement},{Name:"ContentBottom",Type:t.ContentPresenter},{Name:"TabPanelBottom",Type:t.TabPanel})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){n.call(this),this._SelectedElements=new r,this._UnselectedElements=new r,this._PreviousTemplate=null,this._PreviousHeader=null,this.DefaultStyleKey=o}return __extends(o,n),Object.defineProperty(o.prototype,"TabStripPlacement",{get:function(){var e=this.TabControlParent;return null!=e?e.TabStripPlacement:t.Dock.Top},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"TabControlParent",{get:function(){return e.VisualTreeHelper.GetParentOfType(this,t.TabControl)},enumerable:!0,configurable:!0}),o.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this);var e=this._GetContentControl(this.IsSelected,this.TabStripPlacement);null!=e&&(e.Content=null),this._SelectedElements.OnApplyTemplate(this,!0),this._UnselectedElements.OnApplyTemplate(this,!1),this._UpdateHeaderVisuals(),this.UpdateVisualState(!1)},o.prototype._OnHeaderChanged=function(e){this.HasHeader=null!=e.NewValue,this.OnHeaderChanged(e.OldValue,e.NewValue)},o.prototype.OnHeaderChanged=function(e,t){this._UpdateHeaderVisuals()},o.prototype.OnHeaderTemplateChanged=function(e,t){this._UpdateHeaderVisuals()},o.prototype._OnIsSelectedChanged=function(t){var n=t.NewValue,r=new e.RoutedEventArgs;n?this.OnSelected(r):this.OnUnselected(r),this.IsTabStop=n,this.UpdateVisualState()},o.prototype.OnSelected=function(e){var t=this.TabControlParent;t&&(t.SelectedItem=this)},o.prototype.OnUnselected=function(e){var t=this.TabControlParent;t&&t.SelectedItem==this&&(t.SelectedIndex=-1)},o.prototype.UpdateVisualState=function(t){var r=this.GetTemplate(this.IsSelected,this.TabStripPlacement);null!=this._PreviousTemplate&&this._PreviousTemplate!==r&&(this._PreviousTemplate.Visibility=e.Visibility.Collapsed),this._PreviousTemplate=r,null!=r&&(r.Visibility=e.Visibility.Visible);var o=this._GetContentControl(this.IsSelected,this.TabStripPlacement);this._PreviousHeader&&this._PreviousHeader!==o&&(this._PreviousHeader.Content=null),this._PreviousHeader=o,this._UpdateHeaderVisuals(),n.prototype.UpdateVisualState.call(this,t)},o.prototype._UpdateHeaderVisuals=function(){var e=this._GetContentControl(this.IsSelected,this.TabStripPlacement);e&&(e.Content=this.Header,e.ContentTemplate=this.HeaderTemplate)},o.prototype.OnMouseLeave=function(e){this.UpdateVisualState()},o.prototype.OnMouseEnter=function(e){this.UpdateVisualState()},o.prototype.OnMouseLeftButtonDown=function(e){this.IsEnabled&&this.TabControlParent&&!this.IsSelected&&!e.Handled&&(this.IsTabStop=!0,e.Handled=this.Focus(),this.TabControlParent.SelectedIndex=this.TabControlParent.Items.IndexOf(this))},o.prototype.OnGotFocus=function(e){n.prototype.OnGotFocus.call(this,e),this.SetValueInternal(o.IsFocusedProperty,!0),this.UpdateVisualState()},o.prototype.OnLostFocus=function(e){n.prototype.OnLostFocus.call(this,e),this.SetValueInternal(o.IsFocusedProperty,!1),this.UpdateVisualState()},o.prototype.OnContentChanged=function(e,t){n.prototype.OnContentChanged.call(this,e,t);var r=this.TabControlParent;r&&this.IsSelected&&(r.SelectedContent=t)},o.prototype.OnKeyDown=function(t){if(n.prototype.OnKeyDown.call(this,t),!t.Handled){var r=this.TabControlParent,o=e.Input.InteractionHelper.GetLogicalKey(this.FlowDirection,t.Key),i=r.Items.IndexOf(this),a=null;switch(o){case e.Input.Key.Left:case e.Input.Key.Up:a=this._FindPreviousTabItem(i);break;case e.Input.Key.Right:case e.Input.Key.Down:a=this._FindNextTabItem(i);break;default:return}a&&a!==r.SelectedItem&&(t.Handled=!0,r.SelectedItem=a,a.Focus())}},o.prototype.GetTemplate=function(e,n){var r=e?this._SelectedElements:this._UnselectedElements;return r[t.Dock[n]].Template},o.prototype._GetContentControl=function(e,n){var r=e?this._SelectedElements:this._UnselectedElements;return r[t.Dock[n]].Header},o.prototype._FindPreviousTabItem=function(t){for(var n=t,r=this.TabControlParent.Items;n>=0;n--){var o=r.GetValueAt(n);if(o.IsEnabled&&o.Visibility===e.Visibility.Visible)return o}return null},o.prototype._FindNextTabItem=function(t){for(var n=t,r=this.TabControlParent.Items,o=r.Count;o>n;n++){var i=r.GetValueAt(n);if(i.IsEnabled&&i.Visibility===e.Visibility.Visible)return i}return null},o.HasHeaderProperty=DependencyProperty.Register("HasHeader",function(){return Boolean},o,!1),o.HeaderProperty=DependencyProperty.Register("Header",function(){return Object},o,null,function(e,t){return e._OnHeaderChanged(t)}),o.HeaderTemplateProperty=DependencyProperty.Register("HeaderTemplate",function(){return e.DataTemplate},o,void 0,function(e,t){return e.OnHeaderTemplateChanged(t.OldValue,t.NewValue)}),o.IsFocusedProperty=DependencyProperty.Register("IsFocused",function(){return Boolean},o,!1),o.IsSelectedProperty=DependencyProperty.Register("IsSelected",function(){return Boolean},o,!1,function(e,t){return e._OnIsSelectedChanged(t)}),o}(t.ContentControl);t.TabItem=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"SelectionStates",Name:"Unselected"},{GroupName:"SelectionStates",Name:"Selected"}),t.TemplateParts(n,{Name:"HeaderLeftSelected",Type:e.FrameworkElement},{Name:"HeaderTopSelected",Type:e.FrameworkElement},{Name:"HeaderRightSelected",Type:e.FrameworkElement},{Name:"HeaderBottomSelected",Type:e.FrameworkElement},{Name:"TemplateLeftSelected",Type:e.FrameworkElement},{Name:"TemplateTopSelected",Type:e.FrameworkElement},{Name:"TemplateRightSelected",Type:e.FrameworkElement},{Name:"TemplateBottomSelected",Type:e.FrameworkElement},{Name:"HeaderLeftUnselected",Type:e.FrameworkElement},{Name:"HeaderTopUnselected",Type:e.FrameworkElement},{Name:"HeaderRightUnselected",Type:e.FrameworkElement},{Name:"HeaderBottomUnselected",Type:e.FrameworkElement},{Name:"TemplateLeftUnselected",Type:e.FrameworkElement},{Name:"TemplateTopUnselected",Type:e.FrameworkElement},{Name:"TemplateRightUnselected",Type:e.FrameworkElement},{Name:"TemplateBottomUnselected",Type:e.FrameworkElement});var r=function(){function e(){this.Top=new o,this.Bottom=new o,this.Left=new o,this.Right=new o}return e.prototype.OnApplyTemplate=function(e,t){this.Top.OnApplyTemplate(e,t,"Top"),this.Bottom.OnApplyTemplate(e,t,"Bottom"),this.Left.OnApplyTemplate(e,t,"Left"),this.Right.OnApplyTemplate(e,t,"Right")},e}(),o=function(){function n(){this.Header=null,this.Template=null}return n.prototype.OnApplyTemplate=function(n,r,o){var i=o+(r?"Selected":"Unselected");this.Header=n.GetTemplateChild("Header"+i,t.ContentControl),this.Template=n.GetTemplateChild("Template"+i,e.FrameworkElement)},n}()}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=t.Internal.ScrollEx,r=function(r){function o(){r.call(this),this.SelectedItemChanged=new e.RoutedPropertyChangedEvent,this.DefaultStyleKey=o,this.ItemsControlHelper=new t.Internal.ItemsControlHelper(this)}return __extends(o,r),o.prototype.OnSelectedItemChanged=function(e){if(this._IgnorePropertyChange)this._IgnorePropertyChange=!1;else{if(!this._AllowWrite)throw this._IgnorePropertyChange=!0,this.SetValue(o.SelectedItemProperty,e.OldValue),new InvalidOperationException("Cannot set read-only property SelectedItem.");this.UpdateSelectedValue(e.NewValue)}},o.prototype.OnSelectedValueChanged=function(e){if(!this._IgnorePropertyChange){if(this._AllowWrite)return;throw this._IgnorePropertyChange=!0,this.SetValue(o.SelectedValueProperty,e.OldValue),new InvalidOperationException("Cannot set read-only property SelectedValue.")}this._IgnorePropertyChange=!1},o.prototype.OnSelectedValuePathChanged=function(e){this.UpdateSelectedValue(this.SelectedItem)},o.prototype.OnItemContainerStyleChanged=function(e){this.ItemsControlHelper.UpdateItemContainerStyle(e.NewValue)},o.prototype.OnApplyTemplate=function(){r.prototype.OnApplyTemplate.call(this),this.ItemsControlHelper.OnApplyTemplate(),this.UpdateVisualState(!1)},o.prototype.GetContainerForItem=function(){return new t.TreeViewItem},o.prototype.IsItemItsOwnContainer=function(e){return e instanceof t.TreeViewItem},o.prototype.PrepareContainerForItem=function(e,n){var o=e;o instanceof t.TreeViewItem&&(o.ParentItemsControl=this),t.Internal.ItemsControlHelper.PrepareContainerForItemOverride(e,this.ItemContainerStyle),t.HeaderedItemsControl.PrepareHeaderedItemsControlContainer(o,n,this,this.ItemContainerStyle),r.prototype.PrepareContainerForItem.call(this,e,n)},o.prototype.ClearContainerForItem=function(e,n){var o=e;o instanceof t.TreeViewItem&&(o.ParentItemsControl=null),r.prototype.ClearContainerForItem.call(this,e,n)},o.prototype.OnItemsChanged=function(t){if(!t)throw new ArgumentException("e");if(r.prototype.OnItemsChanged.call(this,t),null!=t.NewItems)for(var n=0,o=t.NewItems,i=o.length;i>n;n++)o[n].ParentItemsControl=this;switch(t.Action){case e.Collections.CollectionChangedAction.Remove:case e.Collections.CollectionChangedAction.Reset:null==this.SelectedItem||this.IsSelectedContainerHookedUp||this.SelectFirstItem();break;case e.Collections.CollectionChangedAction.Replace:var a=this.SelectedItem;null==a||null!=t.OldItems&&!nullstone.equals(a,t.OldItems[0])||this.ChangeSelection(a,this.SelectedContainer,!1)}if(t.OldItems)for(var n=0,o=t.OldItems,i=o.length;i>n;n++)o[n].ParentItemsControl=null},o.prototype.CheckForSelectedDescendents=function(e){var t=[];for(t.push(e);t.length>0;){var n=t.pop();n.IsSelected&&(n.IgnorePropertyChange=!0,n.IsSelected=!1,this.ChangeSelection(n,n,!0),null==this.SelectedContainer.ParentItemsControl&&(this.SelectedContainer.RequiresContainsSelectionUpdate=!0));for(var r=n.Items.getEnumerator();r.moveNext();)t.push(r.current)}},o.prototype.PropagateKeyDown=function(e){this.OnKeyDown(e)},o.prototype.OnKeyDown=function(t){if(r.prototype.OnKeyDown.call(this,t),!t.Handled&&this.IsEnabled)if(e.Input.Keyboard.HasControl())switch(t.Key){case e.Input.Key.PageUp:case e.Input.Key.PageDown:case e.Input.Key.End:case e.Input.Key.Home:case e.Input.Key.Left:case e.Input.Key.Up:case e.Input.Key.Right:case e.Input.Key.Down:n.HandleKey(this.ItemsControlHelper.ScrollHost,t.Key,this.FlowDirection)&&(t.Handled=!0)}else switch(t.Key){case e.Input.Key.PageUp:case e.Input.Key.PageDown:if(null!=this.SelectedContainer){if(!this.HandleScrollByPage(t.Key===e.Input.Key.PageUp))break;t.Handled=!0;break}if(!this.FocusFirstItem())break;t.Handled=!0;break;case e.Input.Key.End:if(!this.FocusLastItem())break;t.Handled=!0;break;case e.Input.Key.Home:if(!this.FocusFirstItem())break;t.Handled=!0;break;case e.Input.Key.Up:case e.Input.Key.Down:if(null!=this.SelectedContainer||!this.FocusFirstItem())break;t.Handled=!0}},o.prototype.HandleScrollByPage=function(e){var r=this.ItemsControlHelper.ScrollHost;if(null!=r){var o=r.ViewportHeight,i={Value:0},a={Value:0};n.GetTopAndBottom(this.SelectedContainer.HeaderElement||this.SelectedContainer,r,i,a);var s=null,l=this.SelectedContainer,u=this.SelectedContainer.ParentItemsControl;if(null!=u){if(e)for(var p;u!==this;u=p){var c=u;if(null!=c){if(p=c.ParentItemsControl,!p)break;l=c}break}for(var h=u.ItemContainersManager.IndexFromContainer(l),d=u.Items.Count;null!=u&&null!=l;){if(l.IsEnabled){var m={Value:0};if(l.HandleScrollByPage(e,r,o,i.Value,a.Value,m))return!0;if(NumberEx.IsGreaterThanClose(m.Value,o)){if(s===this.SelectedContainer||null==s)return e?this.SelectedContainer.HandleUpKey():this.SelectedContainer.HandleDownKey();break}s=l}if(h+=e?-1:1,h>=0&&d>h)l=u.ItemContainersManager.ContainerFromIndex(h),l instanceof t.TreeViewItem||(l=null);else if(u===this)l=null;else for(;null!=u;){var c=u instanceof t.TreeViewItem?u:null;if(u=c.ParentItemsControl,null!=u){if(d=u.Items.Count,h=u.ItemContainersManager.IndexFromContainer(c)+(e?-1:1),h>-1&&d>h){l=u.ItemContainersManager.ContainerFromIndex(h),l instanceof t.TreeViewItem||(l=null);break}u==this&&(l=null,u=null)}}}}if(null!=s)if(e){if(s!==this.SelectedContainer)return s.Focus()}else s.FocusInto()}return!1},o.prototype.OnMouseEnter=function(e){r.prototype.OnMouseEnter.call(this,e),this.UpdateVisualState()},o.prototype.OnMouseLeave=function(e){r.prototype.OnMouseLeave.call(this,e),this.UpdateVisualState()},o.prototype.OnMouseMove=function(e){r.prototype.OnMouseMove.call(this,e),this.UpdateVisualState()},o.prototype.OnMouseLeftButtonDown=function(e){r.prototype.OnMouseLeftButtonDown.call(this,e),!e.Handled&&this.HandleMouseButtonDown()&&(e.Handled=!0),this.UpdateVisualState()},o.prototype.HandleMouseButtonDown=function(){return this.SelectedContainer?(this.SelectedContainer.IsFocused||this.SelectedContainer.Focus(),!0):!1},o.prototype.OnMouseLeftButtonUp=function(e){r.prototype.OnMouseLeftButtonUp.call(this,e),this.UpdateVisualState()},o.prototype.OnGotFocus=function(e){r.prototype.OnGotFocus.call(this,e),this.UpdateVisualState()},o.prototype.OnLostFocus=function(e){r.prototype.OnLostFocus.call(this,e),this.UpdateVisualState()},o.prototype.ChangeSelection=function(t,n,r){if(!this.IsSelectionChangeActive){var o=null,i=null,a=!1,s=this.SelectedContainer;this.IsSelectionChangeActive=!0;try{r&&n!==s?(o=this.SelectedItem,null!=s&&(s.IsSelected=!1,s.UpdateContainsSelection(!1)),i=t,this.SelectedContainer=n,this.SelectedContainer.UpdateContainsSelection(!0),this.SelectedItem=t,this.UpdateSelectedValue(t),a=!0,this.ItemsControlHelper.ScrollIntoView(n.HeaderElement||n)):r||n!==s||(this.SelectedContainer.UpdateContainsSelection(!1),this.SelectedContainer=null,this.SelectedItem=null,this.SelectedValue=null,o=t,a=!0),n.IsSelected=r}finally{this.IsSelectionChangeActive=!1}a&&this.SelectedItemChanged.raise(this,new e.RoutedPropertyChangedEventArgs(o,i))}},o.prototype.UpdateSelectedValue=function(n){if(!n)return void this.ClearValue(o.SelectedValueProperty);var r=this.SelectedValuePath;if(r){var i=new e.Data.Binding(r);i.Source=n;var a=new t.ContentControl;a.SetBinding(t.ContentControl.ContentProperty,i),this.SelectedValue=a.Content,a.ClearValue(t.ContentControl.ContentProperty)}else this.SelectedValue=n},o.prototype.SelectFirstItem=function(){var e=this.ItemContainersManager.ContainerFromIndex(0),n=e instanceof t.TreeViewItem;
n||(e=this.SelectedContainer),this.ChangeSelection(n?this.ItemContainersManager.ItemFromContainer(e):this.SelectedItem,e,n)},o.prototype.FocusFirstItem=function(){var e=this.ItemContainersManager.ContainerFromIndex(0);return e?e.IsEnabled&&e.Focus()?!0:e.FocusDown():!1},o.prototype.FocusLastItem=function(){for(var e=this.Items.Count-1;e>=0;--e){var n=this.ItemContainersManager.ContainerFromIndex(e);if(n instanceof t.TreeViewItem&&n.IsEnabled)return n.FocusInto()}return!1},o.SelectedItemProperty=DependencyProperty.Register("SelectedItem",function(){return Object},o,null,function(e,t){return e.OnSelectedItemChanged(t)}),o.SelectedValueProperty=DependencyProperty.Register("SelectedValue",function(){return Object},o,null,function(e,t){return e.OnSelectedValueChanged(t)}),o.SelectedValuePathProperty=DependencyProperty.Register("SelectedValuePath",function(){return String},o,"",function(e,t){return e.OnSelectedValuePathChanged(t)}),o.ItemContainerStyleProperty=DependencyProperty.Register("ItemContainerStyle",function(){return e.Style},o,null,function(e,t){return e.OnItemContainerStyleChanged(t)}),o}(t.ItemsControl);t.TreeView=r,t.TemplateVisualStates(r,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"},{GroupName:"ValidationStates",Name:"InvalidFocused"}),Object.defineProperty(r.prototype,"SelectedValue",{get:function(){return this.GetValue(r.SelectedValueProperty)},set:function(e){try{this._AllowWrite=!0,this.SetValue(r.SelectedValueProperty,e)}finally{this._AllowWrite=!1}}}),Object.defineProperty(r.prototype,"SelectedItem",{get:function(){return this.GetValue(r.SelectedItemProperty)},set:function(e){try{this._AllowWrite=!0,this.SetValue(r.SelectedItemProperty,e)}finally{this._AllowWrite=!1}}})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(e,t,n,o,i,a){var s={Value:0},l={Value:0};r.GetTopAndBottom(t,n,s,l);var u=0;return e?(u=i-l.Value,i-s.Value):(u=s.Value-o,l.Value-o)}var r=t.Internal.ScrollEx,o=function(r){function o(){r.call(this),this.Collapsed=new e.RoutedEvent,this.Expanded=new e.RoutedEvent,this.Selected=new e.RoutedEvent,this.Unselected=new e.RoutedEvent,this._AllowWrite=!1,this._MultiClick=new t.Internal.MultiClickHelper,this._IsPressed=!1,this.DefaultStyleKey=o}return __extends(o,r),o.prototype.$SetHasItems=function(e){try{this._AllowWrite=!0,this.SetCurrentValue(o.HasItemsProperty,e)}finally{this._AllowWrite=!1}},o.prototype.$SetIsSelectionActive=function(e){try{this._AllowWrite=!0,this.SetCurrentValue(o.IsSelectionActiveProperty,e===!0)}finally{this._AllowWrite=!1}},o.prototype.OnHasItemsChanged=function(e){if(this.IgnorePropertyChange)this.IgnorePropertyChange=!1;else{if(!this._AllowWrite)throw this.IgnorePropertyChange=!0,this.SetCurrentValue(o.HasItemsProperty,e.OldValue),new InvalidOperationException("Cannot set read-only property HasItems.");this.UpdateVisualState()}},o.prototype.OnIsExpandedPropertyChanged=function(t){var n=t.NewValue===!0;if(n?this.OnExpanded(new e.RoutedEventArgs):this.OnCollapsed(new e.RoutedEventArgs),n){if(null!=this.ExpansionStateGroup||!this.UserInitiatedExpansion)return;this.UserInitiatedExpansion=!1;var r=this.ParentTreeView;if(!r)return;r.ItemsControlHelper.ScrollIntoView(this)}else{if(!this.ContainsSelection)return;this.Focus()}},o.prototype.OnIsSelectedChanged=function(t){this.IgnorePropertyChange?this.IgnorePropertyChange=!1:t.NewValue===!0?(this.Select(!0),this.OnSelected(new e.RoutedEventArgs)):(this.Select(!1),this.OnUnselected(new e.RoutedEventArgs))},o.prototype.OnIsSelectionActiveChanged=function(e){if(this.IgnorePropertyChange)this.IgnorePropertyChange=!1;else{if(!this._AllowWrite)throw this.IgnorePropertyChange=!0,this.SetValueInternal(o.IsSelectionActiveProperty,e.OldValue),new InvalidOperationException("Cannot set read-only property IsSelectionActive.");this.UpdateVisualState()}},Object.defineProperty(o.prototype,"ExpanderButton",{get:function(){return this._expanderButton},set:function(e){this._expanderButton&&(this._expanderButton.Click.off(this.OnExpanderClick,this),this._expanderButton.GotFocus.off(this.OnExpanderGotFocus,this)),this._expanderButton=e,this._expanderButton&&(this._expanderButton.IsChecked=this.IsExpanded,this._expanderButton.Click.on(this.OnExpanderClick,this),this._expanderButton.GotFocus.on(this.OnExpanderGotFocus,this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"HeaderElement",{get:function(){return this._headerElement},set:function(e){this._headerElement&&this._headerElement.MouseLeftButtonDown.off(this.OnHeaderMouseLeftButtonDown,this),this._headerElement=e,this._headerElement&&this._headerElement.MouseLeftButtonDown.on(this.OnHeaderMouseLeftButtonDown,this)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ExpansionStateGroup",{get:function(){return this._expansionStateGroup},set:function(e){this._expansionStateGroup&&this._expansionStateGroup.CurrentStateChanged.off(this.OnExpansionStateGroupStateChanged,this),this._expansionStateGroup=e,this._expansionStateGroup&&this._expansionStateGroup.CurrentStateChanged.on(this.OnExpansionStateGroupStateChanged,this)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ParentItemsControl",{get:function(){return this._parentItemsControl},set:function(e){if(this._parentItemsControl!=e){this._parentItemsControl=e;var t=this.ParentTreeView;null!=t&&(this.RequiresContainsSelectionUpdate&&(this.RequiresContainsSelectionUpdate=!1,this.UpdateContainsSelection(!0)),t.CheckForSelectedDescendents(this))}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ParentTreeViewItem",{get:function(){var e=this.ParentItemsControl;return e instanceof o?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ParentTreeView",{get:function(){for(var e=this;null!=e;e=e.ParentTreeViewItem){var n=e.ParentItemsControl;if(n instanceof t.TreeView)return n}return null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"IsRoot",{get:function(){return this.ParentItemsControl instanceof t.TreeView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CanExpandOnInput",{get:function(){return this.HasItems&&this.IsEnabled},enumerable:!0,configurable:!0}),o.prototype.OnApplyTemplate=function(){r.prototype.OnApplyTemplate.call(this),this.ExpanderButton=this.GetTemplateChild("ExpanderButton",t.Primitives.ToggleButton),this.HeaderElement=this.GetTemplateChild("Header",e.FrameworkElement),this.ExpansionStateGroup=e.Media.VSM.VisualStateManager.GetGroup(this,"ExpansionStates"),this.UpdateVisualState(!1)},o.prototype.OnExpansionStateGroupStateChanged=function(e,t){t.NewState.Name&&"expanded"===t.NewState.Name.toLowerCase()&&this.BringIntoView()},o.prototype.BringIntoView=function(){var e=this;if(this.UserInitiatedExpansion){this.UserInitiatedExpansion=!1;var t=this.ParentTreeView;t&&setTimeout(function(){t.ItemsControlHelper.ScrollIntoView(e)},1)}},o.prototype.GoToStates=function(e){r.prototype.GoToStates.call(this,e),this.GoToStateExpansion(e),this.GoToStateHasItems(e),this.GoToStateSelection(e)},o.prototype.GoToStateCommon=function(e){return e(this.IsEnabled?this._IsPressed?"Pressed":this.IsMouseOver?"MouseOver":"Normal":"Disabled")},o.prototype.GoToStateExpansion=function(e){return e(this.IsExpanded?"Expanded":"Collapsed")},o.prototype.GoToStateHasItems=function(e){return e(this.HasItems?"HasItems":"NoItems")},o.prototype.GoToStateSelection=function(e){return e(this.IsSelected?this.IsSelectionActive?"Selected":"SelectedInactive":"Unselected")},o.prototype.GetContainerForItem=function(){return new o},o.prototype.IsItemItsOwnContainer=function(e){return e instanceof o},o.prototype.PrepareContainerForItem=function(e,t){var n=e;n instanceof o&&(n.ParentItemsControl=this),r.prototype.PrepareContainerForItem.call(this,e,t)},o.prototype.ClearContainerForItem=function(e,t){var n=e;n instanceof o&&(n.ParentItemsControl=null),r.prototype.ClearContainerForItem.call(this,e,t)},o.prototype.OnItemsChanged=function(t){if(r.prototype.OnItemsChanged.call(this,t),this.$SetHasItems(this.Items.Count>0),null!=t.NewItems)for(var n=0,o=t.NewItems,i=o.length;i>n;n++)o[n].ParentItemsControl=this;switch(t.Action){case e.Collections.CollectionChangedAction.Remove:case e.Collections.CollectionChangedAction.Reset:if(this.ContainsSelection){var a=this.ParentTreeView;null==a||a.IsSelectedContainerHookedUp||(this.ContainsSelection=!1,this.Select(!0))}break;case e.Collections.CollectionChangedAction.Replace:if(this.ContainsSelection){var a=this.ParentTreeView;if(null!=a){var s=a.SelectedItem;null==s||null!=t.OldItems&&!nullstone.equals(s,t.OldItems[0])||a.ChangeSelection(s,a.SelectedContainer,!1)}}}if(null!=t.OldItems)for(var n=0,o=t.OldItems,i=o.length;i>n;n++)o[n].ParentItemsControl=null},o.prototype.OnExpanded=function(e){this.ToggleExpanded(),this.Expanded.raise(this,e)},o.prototype.OnCollapsed=function(e){this.ToggleExpanded(),this.Collapsed.raise(this,e)},o.prototype.ToggleExpanded=function(){var e=this.ExpanderButton;e&&(e.IsChecked=this.IsExpanded,this.UpdateVisualState())},o.prototype.OnSelected=function(e){this.UpdateVisualState(),this.Selected.raise(this,e)},o.prototype.OnUnselected=function(e){this.UpdateVisualState(),this.Unselected.raise(this,e)},o.prototype.OnGotFocus=function(e){r.prototype.OnGotFocus.call(this,e);var t=this.ParentTreeViewItem;t&&(t.CancelGotFocusBubble=!0);try{if(!this.IsEnabled||this.CancelGotFocusBubble)return;this.Select(!0),this.$SetIsSelectionActive(!0),this.UpdateVisualState()}finally{this.CancelGotFocusBubble=!1}},o.prototype.OnLostFocus=function(e){r.prototype.OnLostFocus.call(this,e),this.$SetIsSelectionActive(!1),this.UpdateVisualState()},o.prototype.OnExpanderGotFocus=function(e,t){this.CancelGotFocusBubble=!0,this.$SetIsSelectionActive(!0),this.UpdateVisualState(!0)},o.prototype.OnMouseEnter=function(e){r.prototype.OnMouseEnter.call(this,e),this.UpdateVisualState()},o.prototype.OnMouseLeave=function(e){r.prototype.OnMouseLeave.call(this,e),this.UpdateVisualState()},o.prototype.OnHeaderMouseLeftButtonDown=function(e,t){if(this._MultiClick.OnMouseLeftButtonDown(this,t),!t.Handled&&this.IsEnabled&&(this.Focus()&&(t.Handled=!0),this._MultiClick.ClickCount%2===0)){var n=this.IsExpanded;this.UserInitiatedExpansion=this.UserInitiatedExpansion||!n,this.IsExpanded=!n,t.Handled=!0}this.OnMouseLeftButtonDown(t),this.UpdateVisualState()},o.prototype.OnExpanderClick=function(e,t){var n=this.IsExpanded;this.UserInitiatedExpansion=this.UserInitiatedExpansion||!n,this.IsExpanded=!n},o.prototype.OnMouseLeftButtonDown=function(e){r.prototype.OnMouseLeftButtonDown.call(this,e);var t;!e.Handled&&null!=(t=this.ParentTreeView)&&t.HandleMouseButtonDown()&&(e.Handled=!0),this._IsPressed=!0,this.UpdateVisualState()},o.prototype.OnMouseLeftButtonUp=function(e){r.prototype.OnMouseLeftButtonUp.call(this,e),this._IsPressed=!1,this.UpdateVisualState()},o.prototype.OnIsEnabledChanged=function(e){r.prototype.OnIsEnabledChanged.call(this,e),e.NewValue||(this._IsPressed=!1)},o.prototype.OnKeyDown=function(t){if(r.prototype.OnKeyDown.call(this,t),this.IsEnabled){if(t.Handled)return;var n=this.FlowDirection===e.FlowDirection.RightToLeft;switch(t.Key){case e.Input.Key.Left:!e.Input.Keyboard.HasControl()&&(n?this.HandleRightKey():this.HandleLeftKey())&&(t.Handled=!0);break;case e.Input.Key.Up:!e.Input.Keyboard.HasControl()&&this.HandleUpKey()&&(t.Handled=!0);break;case e.Input.Key.Right:!e.Input.Keyboard.HasControl()&&(n?this.HandleLeftKey():this.HandleRightKey())&&(t.Handled=!0);break;case e.Input.Key.Down:!e.Input.Keyboard.HasControl()&&this.HandleDownKey()&&(t.Handled=!0);break;case e.Input.Key.Add:this.CanExpandOnInput&&!this.IsExpanded&&(this.UserInitiatedExpansion=!0,this.IsExpanded=!0,t.Handled=!0);break;case e.Input.Key.Subtract:this.CanExpandOnInput&&this.IsExpanded&&(this.IsExpanded=!1,t.Handled=!0)}}if(this.IsRoot){var o=this.ParentTreeView;o&&o.PropagateKeyDown(t)}},o.prototype.HandleRightKey=function(){return this.CanExpandOnInput?this.IsExpanded?this.HandleDownKey():(this.UserInitiatedExpansion=!0,this.IsExpanded=!0,!0):!1},o.prototype.HandleLeftKey=function(){return this.CanExpandOnInput&&this.IsExpanded?(this.IsFocused?this.Focus():this.IsExpanded=!1,!0):!1},o.prototype.HandleDownKey=function(){return this.AllowKeyHandleEvent()&&this.FocusDown()},o.prototype.HandleUpKey=function(){if(!this.AllowKeyHandleEvent())return!1;var e=this.FindPreviousFocusableItem();return e?e!=this.ParentItemsControl||e!=this.ParentTreeView?e.Focus():!0:!1},o.prototype.HandleScrollByPage=function(e,t,r,i,a,s){var l={Value:0};if(s.Value=n(e,this,t,i,a,l),NumberEx.IsGreaterThanClose(l.Value,r)||NumberEx.IsLessThanClose(s.Value,r))return!1;var u=!1,p=this.HeaderElement;null!=p&&NumberEx.IsLessThanClose(n(e,p,t,i,a,{Value:0}),r)&&(u=!0);for(var c=null,h=this.Items.Count,d=e&&this.ContainsSelection,m=e?h-1:0;m>=0&&h>m;){var y=this.ItemContainersManager.ContainerFromIndex(m);if(y instanceof o&&y.IsEnabled){if(d){if(y.IsSelected){d=!1,m+=e?-1:1;continue}if(!y.ContainsSelection){m+=e?-1:1;continue}d=!1}var f={Value:0};if(y.HandleScrollByPage(e,t,r,i,a,f))return!0;if(NumberEx.IsGreaterThanClose(f.Value,r))break;c=y}m+=e?-1:1}return null!=c?e?c.Focus():c.FocusInto():u?this.Focus():!1},o.prototype.Select=function(e){var t=this.ParentTreeView;if(t&&!t.IsSelectionChangeActive){var n=this.ParentTreeViewItem,r=null!=n?n.ItemContainersManager.ItemFromContainer(this):t.ItemContainersManager.ItemFromContainer(this);t.ChangeSelection(r,this,e)}},o.prototype.UpdateContainsSelection=function(e){for(var t=this.ParentTreeViewItem;null!=t;t=t.ParentTreeViewItem)t.ContainsSelection=e},o.prototype.AllowKeyHandleEvent=function(){return this.IsSelected},o.prototype.FocusDown=function(){var e=this.FindNextFocusableItem(!0);return e&&e.Focus()},o.prototype.FocusInto=function(){var e=this.FindLastFocusableItem();return e&&e.Focus()},o.prototype.FindNextFocusableItem=function(e){if(e&&this.IsExpanded&&this.HasItems){var t=this.ItemContainersManager.ContainerFromIndex(0);if(t instanceof o)return t.IsEnabled?t:t.FindNextFocusableItem(!1)}var n=this.ParentItemsControl;if(null!=n){for(var r=n.ItemContainersManager.IndexFromContainer(this),i=n.Items.Count;r++<i;){var t=n.ItemContainersManager.ContainerFromIndex(r);if(t instanceof o&&t.IsEnabled)return t}var a=this.ParentTreeViewItem;if(a instanceof o)return a.FindNextFocusableItem(!1)}return null},o.prototype.FindLastFocusableItem=function(){for(var e=this,t=null,n=-1;e instanceof o;e=t.ItemContainersManager.ContainerFromIndex(n))if(e.IsEnabled){if(!e.IsExpanded||!e.HasItems)return e;t=e,n=e.Items.Count-1}else{if(!(n>0))break;--n}return t},o.prototype.FindPreviousFocusableItem=function(){var e=this.ParentItemsControl;if(!e)return null;for(var t=e.ItemContainersManager.IndexFromContainer(this);t-->0;){var n=e.ItemContainersManager.ContainerFromIndex(t);if(n instanceof o&&n.IsEnabled){var r=n.FindLastFocusableItem();if(null!=r)return r}}return e},o.HasItemsProperty=DependencyProperty.RegisterReadOnly("HasItems",function(){return Boolean},o,!1,function(e,t){return e.OnHasItemsChanged(t)}),o.IsExpandedProperty=DependencyProperty.Register("IsExpanded",function(){return Boolean},o,!1,function(e,t){return e.OnIsExpandedPropertyChanged(t)}),o.IsSelectedProperty=DependencyProperty.Register("IsSelected",function(){return Boolean},o,!1,function(e,t){return e.OnIsSelectedChanged(t)}),o.IsSelectionActiveProperty=DependencyProperty.RegisterReadOnly("IsSelectionActive",function(){return Boolean},o,!1,function(e,t){return e.OnIsSelectionActiveChanged(t)}),o}(t.HeaderedItemsControl);t.TreeViewItem=o,t.TemplateVisualStates(o,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ExpansionStates",Name:"Collapsed"},{GroupName:"ExpansionStates",Name:"Expanded"},{GroupName:"HasItemsStates",Name:"HasItems"},{GroupName:"HasItemsStates",Name:"NoItems"},{GroupName:"SelectionStates",Name:"Unselected"},{GroupName:"SelectionStates",Name:"Selected"},{GroupName:"SelectionStates",Name:"SelectedInactive"}),t.TemplateParts(o,{Name:"Header",Type:e.FrameworkElement},{Name:"ExpanderButton",Type:t.Primitives.ToggleButton})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(e){function t(t,n){e.call(this),this.Handled=!1,Object.defineProperty(this,"Text",{value:t,writable:!1}),Object.defineProperty(this,"Error",{value:n,writable:!1})}return __extends(t,e),t}(e.RoutedEventArgs);t.UpDownParseErrorEventArgs=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(e){function t(t){e.call(this),this.Value=null,this.Handled=!1,Object.defineProperty(this,"Text",{value:t,writable:!1})}return __extends(t,e),t}(e.RoutedEventArgs);t.UpDownParsingEventArgs=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e){this.mousePosition=new Point,this.$$rootVisual=null,e.LayoutUpdated.on(this._HandleLayoutUpdated,this)}return Object.defineProperty(e.prototype,"rootVisual",{get:function(){return this.$$rootVisual},set:function(e){this.$$rootVisual&&(this.$$rootVisual.MouseMove.off(this._HandleRootVisualMouseMove,this),this.$$rootVisual.SizeChanged.off(this._HandleSizeChanged,this)),this.$$rootVisual=e,e&&(e.MouseMove.on(this._HandleRootVisualMouseMove,this),e.SizeChanged.on(this._HandleSizeChanged,this))},enumerable:!0,configurable:!0}),e.prototype.tryInit=function(e){if(e){var t=e.XamlNode.LayoutUpdater.tree.surface;t&&(this.rootVisual=t.App.RootVisual)}},e.prototype.setOnSizeChanged=function(e){this.$$onSizeChanged=e},e.prototype.getAvailableSize=function(){return new minerva.Size(this.rootVisual.ActualWidth,this.rootVisual.ActualHeight)},e.prototype._HandleLayoutUpdated=function(e,t){if(!this.rootVisual){var n=e.XamlNode.LayoutUpdater.tree.surface;n&&(this.rootVisual=n.App.RootVisual)}this.rootVisual&&e.LayoutUpdated.off(this._HandleLayoutUpdated,this)},e.prototype._HandleRootVisualMouseMove=function(e,t){this.mousePosition=t.GetPosition(null)},e.prototype._HandleSizeChanged=function(e,t){this.$$onSizeChanged&&this.$$onSizeChanged(t.NewSize)},e}();e.RootVisualTracker=t}(t=e.contextmenu||(e.contextmenu={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n=function(t){function n(e){t.call(this),this._ValueBinding=null,this._ValueBinding=e}return __extends(n,t),Object.defineProperty(n.prototype,"ValueBinding",{get:function(){return this._ValueBinding},enumerable:!0,configurable:!0}),n.prototype.GetDynamicValue=function(t){var r=this._ValueBinding,o=new e.Data.Binding;o.BindsDirectlyToSource=r.BindsDirectlyToSource,o.Converter=r.Converter,o.ConverterCulture=r.ConverterCulture,o.ConverterParameter=r.ConverterParameter,o.FallbackValue=r.FallbackValue,o.Mode=r.Mode,o.NotifyOnValidationError=r.NotifyOnValidationError,o.Path=r.Path,o.StringFormat=r.StringFormat,o.TargetNullValue=r.TargetNullValue,o.UpdateSourceTrigger=r.UpdateSourceTrigger,o.ValidatesOnDataErrors=r.ValidatesOnDataErrors,o.ValidatesOnExceptions=r.ValidatesOnExceptions,o.ValidatesOnNotifyDataErrors=r.ValidatesOnNotifyDataErrors,o.Source=t,this.SetBinding(n.ValueProperty,o);var i=this.Value;return this.ClearValue(n.ValueProperty),i},n.ValueProperty=DependencyProperty.Register("Value",function(){return Object},n),n}(e.FrameworkElement);t.BindingSourceEvaluator=n}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var r=function(){function n(e,t,n){this.Owner=e,this.OnCoerceValue=t,this.OnCoerceCurrentIndex=n,this.TextBox=null,this.Text="",this.IsCoercing=!1,this._IsEditing=!1,this._IsInvalidInput=!1,this.Owner.KeyDown.on(this.OnKeyDown,this)}return Object.defineProperty(n.prototype,"IsEditing",{get:function(){return this._IsEditing},set:function(e){e!==this._IsEditing&&(this._IsEditing=e,this.OnIsEditingChanged(e))},enumerable:!0,configurable:!0}),n.prototype.OnIsEditingChanged=function(e){this.Owner.OnIsEditingChanged(e),this.TextBox&&(e?(this.TextBox.IsFocused&&this.TextBox.Select(0,this.TextBox.Text.length),this.TextBox.IsHitTestVisible=!0):(this.TextBox.Text=this.Owner.FormatValue(),this.TextBox.IsHitTestVisible=!1))},Object.defineProperty(n.prototype,"IsInvalidInput",{get:function(){return this._IsInvalidInput},set:function(e){e!==this._IsInvalidInput&&(this._IsInvalidInput=e,this.Owner.OnIsInvalidInputChanged(e))},enumerable:!0,configurable:!0}),n.prototype.Attach=function(e){this.TextBox=e,e&&(e.GotFocus.on(this.TextBox_GotFocus,this),e.LostFocus.on(this.TextBox_LostFocus,this)),this.UpdateTextBoxText(),this.UpdateIsEditable()},n.prototype.Detach=function(){this.TextBox&&(this.TextBox.GotFocus.off(this.TextBox_GotFocus,this),this.TextBox.LostFocus.off(this.TextBox_LostFocus,this)),this.TextBox=null},n.prototype.OnKeyDown=function(t,n){if(null==n||n.Key!==e.Input.Key.Enter&&n.Key!==e.Input.Key.Space||this.IsEditing||!this.Owner.IsEditable){if(null==n||n.Handled)return;n.Key===e.Input.Key.Escape?(this.IsInvalidInput=!1,this.IsEditing=!1,n.Handled=!0):!this.IsEditing&&this.Owner.IsEditable&&(this.IsEditing=!0)}else this.IsEditing=!0,n.Handled=!0},n.prototype.EscapeFocus=function(){var e=this;this.IsInvalidInput?this.Owner.InvalidInputAction===t.InvalidInputAction.TextBoxCannotLoseFocus&&this.TextBox.IsFocused&&window.setTimeout(function(){return e.TextBox.Focus()},1):this.IsEditing=!1},n.prototype.OnValueChanged=function(e,t){if(!this.IsCoercing){var n=this.Owner.Items.IndexOf(t);n>-1&&(this.IsCoercing=!0,this.OnCoerceCurrentIndex(n),this.IsCoercing=!1)}this.UpdateTextBoxText(),this.Owner.OnValueChanged(e,t)},n.prototype.OnCurrentIndexChanged=function(e,t){this.IsCoercing||t>=0&&t<this.Owner.Items.Count&&(this.IsCoercing=!0,this.OnCoerceValue(this.Owner.Items.GetValueAt(t)),this.IsCoercing=!1),this.IsEditing=!1,this.Owner.OnCurrentIndexChanged(e,t)},n.prototype.TextBox_LostFocus=function(e,t){this.ProcessUserInput()},n.prototype.TextBox_GotFocus=function(e,t){this.SelectAllText()},n.prototype.SelectAllText=function(){this.TextBox&&this.TextBox.SelectAll()},n.prototype.UpdateTextBoxText=function(){this.TextBox&&(this.Text=this.Owner.FormatValue()||"",this.TextBox.Text=this.Text,this.TextBox.SelectionStart=this.Text.length)},n.prototype.UpdateIsEditable=function(){this.TextBox&&(this.TextBox.IsReadOnly=!this.Owner.IsEditable)},n.prototype.ProcessUserInput=function(){if(this.TextBox&&this.Text!==this.TextBox.Text){var e=this.TextBox.SelectionStart;this.Text=this.TextBox.Text,this.ApplyValue(this.Text),e<this.TextBox.Text.length&&(this.TextBox.SelectionStart=e)}},n.prototype.OnParseError=function(e){this.Owner.ParseError.raise(this,e)},n.prototype.ApplyValue=function(e){if(this.Owner.IsEditable){this.IsEditing=!0;try{var n={Value:null};this.IsInvalidInput=!this.Owner.TryParseValue(e,n),this.OnCoerceValue(n.Value)}catch(r){var o=new t.UpDownParseErrorEventArgs(e,r);this.OnParseError(o),o.Handled||this.UpdateTextBoxText()}finally{this.IsInvalidInput||(this.IsEditing=!1)}}},n}();n.DomainCoercer=r}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.Attach=function(e,t){var n=this;this._Callback=t,e.on(this._OnEvent,this),this.Detach=function(){e.off(n._OnEvent,n),n.Detach=function(){}}},e.prototype.Detach=function(){},e.prototype._OnEvent=function(e,t){this._Callback&&this._Callback(e,t)},e}();e.EventGesture=t}(t=e.Internal||(e.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t=function(e){function t(t,n,r,o){e.call(this,t,n,r),this.OnCoerceFormat=o}return __extends(t,e),t.prototype.OnDecimalPlacesChanged=function(e,t){this.CoerceDepth++,this.OnCoerceFormat(),this.CoerceDepth--},t.prototype.AddToValue=function(e){this.OnCoerceValue(this.Value+e),this.RequestedVal=this.Value},t}(e.RangeCoercer);e.FormattedRangeCoercer=t}(t=e.Internal||(e.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){function r(e){if(e instanceof p){var t=e,n={};return Object.defineProperty(n,"ActualSize",{get:function(){return t.ActualHeight}}),Object.defineProperty(n,"MaxSize",{get:function(){return t.MaxHeight||0}}),Object.defineProperty(n,"MinSize",{get:function(){return t.MinHeight||0}}),Object.defineProperty(n,"Size",{get:function(){return t.Height},set:function(e){t.Height=e}}),Object.defineProperty(n,"IsStar",{get:function(){return!!t.Height&&t.Height.Type===o.Star}}),n.Index=0,n.OrigActualSize=t.ActualHeight,n}if(e instanceof c){var r=e,n={};return Object.defineProperty(n,"ActualSize",{get:function(){return r.ActualWidth}}),Object.defineProperty(n,"MaxSize",{get:function(){return r.MaxWidth||0}}),Object.defineProperty(n,"MinSize",{get:function(){return r.MinWidth||0}}),Object.defineProperty(n,"Size",{get:function(){return r.Width},set:function(e){r.Width=e}}),Object.defineProperty(n,"IsStar",{get:function(){return!!r.Width&&r.Width.Type===o.Star}}),n.Index=0,n.OrigActualSize=r.ActualWidth,n}}var o=minerva.controls.grid.GridUnitType;!function(e){e[e.Auto=0]="Auto",e[e.Columns=1]="Columns",e[e.Rows=2]="Rows"}(n.GridResizeDirection||(n.GridResizeDirection={}));var i=n.GridResizeDirection;!function(e){e[e.BasedOnAlignment=0]="BasedOnAlignment",e[e.CurrentAndNext=1]="CurrentAndNext",e[e.PreviousAndCurrent=2]="PreviousAndCurrent",e[e.PreviousAndNext=3]="PreviousAndNext"}(n.GridResizeBehavior||(n.GridResizeBehavior={}));var a=n.GridResizeBehavior;!function(e){e[e.Split=0]="Split",e[e.ResizeDefinition1=1]="ResizeDefinition1",e[e.ResizeDefinition2=2]="ResizeDefinition2"}(n.SplitBehavior||(n.SplitBehavior={}));var s=n.SplitBehavior,l=function(){function n(e){this.UpdateResizeDirection(e),this.Behavior=u[this.Direction!==i.Columns?e.VerticalAlignment:e.HorizontalAlignment]||a.PreviousAndNext,this.SplitterLength=Math.min(e.ActualWidth,e.ActualHeight)}return n.prototype.Setup=function(e,n){var o=this.Direction===i.Columns,a=o?t.Grid.GetColumnSpan(e):t.Grid.GetRowSpan(e);if(a>1)return!1;var l=o?t.Grid.GetColumn(e):t.Grid.GetRow(e),u=this.GetBehaviorIndices(l),p=o?n.ColumnDefinitions:n.RowDefinitions;return u[0]<0||u[1]>=p.Count?!1:(this.SplitterIndex=l,this.DS1=r(p.GetValueAt(u[0])),this.DS1.Index=u[0],this.DS2=r(p.GetValueAt(u[1])),this.DS2.Index=u[1],this.SplitBehavior=this.DS1.IsStar&&this.DS2.IsStar?s.Split:this.DS1.IsStar?s.ResizeDefinition2:s.ResizeDefinition1,!0)},n.prototype.Move=function(e,t,n){var r=this.DS1,o=this.DS2;if(!r||!o)return!0;if(this.SplitBehavior===s.Split&&!NumberEx.AreClose(r.ActualSize+o.ActualSize,r.OrigActualSize+o.OrigActualSize))return!1;var a=this.GetConstraints(),l=a[0],u=a[1],p=this.Direction===i.Columns?t:n;return p=Math.min(Math.max(p,l),u),this.SetLengths(e,r.ActualSize+p,o.ActualSize-p),!0},n.prototype.UpdateResizeDirection=function(t){var n=this.Direction;return t.HorizontalAlignment!==e.HorizontalAlignment.Stretch?this.Direction=i.Columns:t.VerticalAlignment===e.VerticalAlignment.Stretch&&t.ActualWidth<=t.ActualHeight?this.Direction=i.Columns:this.Direction=i.Rows,n!==this.Direction},n.prototype.SetLengths=function(e,n,a){if(this.SplitBehavior!==s.Split)return void(this.SplitBehavior===s.ResizeDefinition1?this.DS1.Size=new t.GridLength(n,o.Pixel):this.DS2.Size=new t.GridLength(a,o.Pixel));for(var l=this.Direction===i.Columns?e.ColumnDefinitions.getEnumerator():e.RowDefinitions.getEnumerator(),u=0;l.moveNext();){var p=r(l.current);this.DS1.Index===u?p.Size=new t.GridLength(n,o.Star):this.DS2.Index===u?p.Size=new t.GridLength(a,o.Star):p.IsStar&&(p.Size=new t.GridLength(p.ActualSize,o.Star)),u++}},n.prototype.GetConstraints=function(){var e=this.DS1.ActualSize,t=this.DS1.MinSize,n=this.DS1.MaxSize,r=this.DS2.ActualSize,o=this.DS2.MinSize,i=this.DS2.MaxSize;return this.SplitterIndex===this.DS1.Index?t=Math.max(t,this.SplitterLength):this.SplitterIndex===this.DS2.Index&&(o=Math.max(o,this.SplitterLength)),this.SplitBehavior===s.Split?[-Math.min(e-t,i-r),Math.min(n-e,r-o)]:this.SplitBehavior!==s.ResizeDefinition1?[r-i,r-o]:[t-e,n-e]},n.prototype.GetBehaviorIndices=function(e){switch(this.Behavior){case a.CurrentAndNext:return[e,e+1];case a.PreviousAndCurrent:return[e-1,e];default:return[e-1,e+1]}},n}();n.GridSplitterResizer=l;var u=[];u[e.VerticalAlignment.Top]=a.PreviousAndCurrent,u[e.VerticalAlignment.Bottom]=a.CurrentAndNext,u[e.HorizontalAlignment.Left]=a.PreviousAndCurrent,u[e.HorizontalAlignment.Right]=a.CurrentAndNext;var p=e.Controls.RowDefinition,c=e.Controls.ColumnDefinition}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var r=function(){function n(e){this.ItemsControl=e}return Object.defineProperty(n.prototype,"ItemsHost",{get:function(){if(!(this._itemsHost instanceof t.Panel)&&null!=this.ItemsControl&&null!=this.ItemsControl.ItemContainersManager){var n=this.ItemsControl.ItemContainersManager.ContainerFromIndex(0);null!=n&&(this._itemsHost=e.VisualTreeHelper.GetParent(n))}return this._itemsHost},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ScrollHost",{get:function(){if(!this._scrollHost){var n=this.ItemsHost;if(null!=n)for(var r=n;r!==this.ItemsControl&&null!=r;r=e.VisualTreeHelper.GetParent(r)){var o=r;if(o instanceof t.ScrollViewer){this._scrollHost=o;break}}}return this._scrollHost},enumerable:!0,configurable:!0}),n.prototype.OnApplyTemplate=function(){this._itemsHost=null,this._scrollHost=null},n.PrepareContainerForItemOverride=function(n,r){if(r){var o=n instanceof t.Control?n:null;o&&null==o.Style&&o.SetValue(e.FrameworkElement.StyleProperty,r)}},n.prototype.UpdateItemContainerStyle=function(e){if(e){var t=this.ItemsHost;if(t&&t.Children)for(var n=t.Children.getEnumerator();n.moveNext();){var r=n.current;r.Style||(r.Style=e)}}},n.prototype.ScrollIntoView=function(e){var t=this.ScrollHost;if(t){var n;try{n=e.TransformToVisual(t)}catch(r){return}var o=n.Transform(new Point),i=n.Transform(new Point(e.ActualWidth,e.ActualHeight)),a=new minerva.Rect(o.x,o.y,i.x,i.y),s=t.VerticalOffset,l=0,u=t.ViewportHeight,p=a.y+a.height;p>u&&(l=p-u,s+=l);var c=a.y;0>c-l&&(s-=l-c),t.ScrollToVerticalOffset(s);var h=t.HorizontalOffset,d=0,m=t.ViewportWidth,y=a.x+a.width;y>m&&(d=y-m,h+=d);var f=a.x;0>f-d&&(h-=d-f),t.ScrollToHorizontalOffset(h)}},n}();n.ItemsControlHelper=r}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){function t(e,t){var n=t.x,r=t.y;return e&&(n-=e.x,r-=e.y),n*n+r*r}var n=function(){function e(){this.ClickCount=0}return e.prototype.OnMouseLeftButtonDown=function(e,n){if(!e.IsEnabled)return void(this.ClickCount=1);var r=(new Date).getTime(),o=r-this.LastClickTime,i=n.GetPosition(e),a=t(this.LastClickPosition,i);500>o&&9>a?this.ClickCount++:this.ClickCount=1,this.LastClickTime=r,this.LastClickPosition=i},e}();e.MultiClickHelper=n}(t=e.Internal||(e.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n=function(e){function t(t){if(e.call(this),this.IsReadOnly=!1,t)for(var n=t.getEnumerator();n.moveNext();)this.Add(n.current)}return __extends(t,e),t.prototype.Add=function(t){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");
e.prototype.Add.call(this,t)},t.prototype.AddRange=function(t){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.AddRange.call(this,t)},t.prototype.Insert=function(t,n){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.Insert.call(this,t,n)},t.prototype.RemoveAt=function(t){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.RemoveAt.call(this,t)},t.prototype.SetValueAt=function(t,n){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.SetValueAt.call(this,t,n)},t.prototype.Clear=function(){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.Clear.call(this)},t}(e.Collections.ObservableCollection);t.ObservableObjectCollection=n}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){function n(e,t){t+=e.VerticalOffset,t=Math.max(Math.min(t,e.ExtentHeight),0),e.ScrollToVerticalOffset(t)}function r(e,t){t+=e.HorizontalOffset,t=Math.max(Math.min(t,e.ExtentWidth),0),e.ScrollToHorizontalOffset(t)}var o=function(){function t(){}return t.HandleKey=function(n,r,o){if(!n)return!1;var i=o===e.FlowDirection.RightToLeft;switch(r){case e.Input.Key.PageUp:return NumberEx.IsGreaterThanClose(n.ExtentHeight,n.ViewportHeight)?t.PageUp(n):t.PageLeft(n),!0;case e.Input.Key.PageDown:return NumberEx.IsGreaterThanClose(n.ExtentHeight,n.ViewportHeight)?t.PageDown(n):t.PageRight(n),!0;case e.Input.Key.End:return t.ScrollToBottom(n),!0;case e.Input.Key.Home:return t.ScrollToTop(n),!0;case e.Input.Key.Left:return i?t.LineRight(n):t.LineLeft(n),!0;case e.Input.Key.Up:return t.LineUp(n),!0;case e.Input.Key.Right:return i?t.LineLeft(n):t.LineRight(n),!0;case e.Input.Key.Down:return t.LineDown(n),!0}return!1},t.LineUp=function(e){n(e,-16)},t.LineDown=function(e){n(e,16)},t.LineLeft=function(e){r(e,-16)},t.LineRight=function(e){r(e,16)},t.PageUp=function(e){n(e,-e.ViewportHeight)},t.PageDown=function(e){n(e,e.ViewportHeight)},t.PageLeft=function(e){r(e,-e.ViewportWidth)},t.PageRight=function(e){r(e,e.ViewportWidth)},t.ScrollToTop=function(e){e.ScrollToVerticalOffset(0)},t.ScrollToBottom=function(e){e.ScrollToVerticalOffset(e.ExtentHeight)},t.GetTopAndBottom=function(e,t,n,r){var o=e.TransformToVisual(t);n.Value=o.Transform(new Point(0,0)).y,r.Value=o.Transform(new Point(0,e.ActualHeight)).y},t}();t.ScrollEx=o}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var r=function(){function n(e,t){this.Owner=e,this.Spinner=t,this.Owner&&(this.Owner.KeyDown.on(this.OnKeyDown,this),this.Owner.MouseWheel.on(this.OnMouseWheel,this)),this.Spinner&&this.Spinner.Spin.on(this.Spinner_Spin,this)}return n.prototype.UpdateValid=function(e,n){var r=t.ValidSpinDirections.None;e&&(r|=t.ValidSpinDirections.Increase),n&&(r|=t.ValidSpinDirections.Decrease),this.Spinner&&(this.Spinner.ValidSpinDirection=r)},n.prototype.Dispose=function(){this.Owner&&(this.Owner.KeyDown.off(this.OnKeyDown,this),this.Owner.MouseWheel.off(this.OnMouseWheel,this)),this.Spinner&&this.Spinner.Spin.on(this.Spinner_Spin,this)},n.prototype.OnKeyDown=function(t,n){if(!n.Handled)switch(n.Key){case e.Input.Key.Enter:this.Owner.OnSpin(),n.Handled=!0;break;case e.Input.Key.Up:this.DoIncrement(),n.Handled=!0;break;case e.Input.Key.Down:this.DoDecrement(),n.Handled=!0}},n.prototype.OnMouseWheel=function(e,t){t.Handled||(t.Delta<0?this.DoDecrement():0<t.Delta&&this.DoIncrement(),t.Handled=!0)},n.prototype.Spinner_Spin=function(e,n){this.Owner.OnSpin(),this.Spinner&&(n.Direction===t.SpinDirection.Increase?this.DoIncrement():this.DoDecrement())},n.prototype.DoIncrement=function(){this.Spinner&&(this.Spinner.ValidSpinDirection&t.ValidSpinDirections.Increase)===t.ValidSpinDirections.Increase&&this.Owner.OnIncrement()},n.prototype.DoDecrement=function(){this.Spinner&&(this.Spinner.ValidSpinDirection&t.ValidSpinDirections.Decrease)===t.ValidSpinDirections.Decrease&&this.Owner.OnDecrement()},n}();n.SpinFlow=r}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n=function(){function t(e,t,n){this.Control=e,this.TextBox=t,this.OnCoerceValue=n,this.Text="",this.TextBox&&(this.TextBox.GotFocus.on(this.TextBox_GotFocus,this),this.TextBox.LostFocus.on(this.TextBox_LostFocus,this)),this.UpdateTextBoxText(),this.UpdateIsEditable()}return Object.defineProperty(t.prototype,"Value",{get:function(){return this.Control.Value},enumerable:!0,configurable:!0}),t.prototype.ProcessUserInput=function(){if(this.TextBox&&this.Text!==this.TextBox.Text){var e=this.TextBox.SelectionStart;this.Text=this.TextBox.Text,this.ApplyValue(this.Text),e<this.TextBox.Text.length&&(this.TextBox.SelectionStart=e)}},t.prototype.Dispose=function(){this.TextBox&&(this.TextBox.GotFocus.off(this.TextBox_GotFocus,this),this.TextBox.LostFocus.off(this.TextBox_LostFocus,this))},t.prototype.TextBox_LostFocus=function(e,t){this.ProcessUserInput()},t.prototype.TextBox_GotFocus=function(e,t){this.SelectAllText()},t.prototype.ApplyValue=function(t){var n,r=new e.UpDownParsingEventArgs(t),o=null;try{n=this.Control.ParseValue(t),r.Value=n}catch(i){o=i}try{this.OnParsing(r)}catch(i){}if(null==o){var a=r.Handled?r.Value:n;this.Value;this.Value===a&&this.UpdateTextBoxText(),this.OnCoerceValue(a)}else if(r.Handled)this.Value===r.Value&&this.UpdateTextBoxText(),this.OnCoerceValue(r.Value);else{var s=new e.UpDownParseErrorEventArgs(t,o);this.OnParseError(s),s.Handled||this.UpdateTextBoxText()}},t.prototype.OnParseError=function(e){this.Control.ParseError.raise(this,e)},t.prototype.OnParsing=function(e){this.Control.Parsing.raise(this,e)},t.prototype.SelectAllText=function(){this.TextBox&&this.TextBox.SelectAll()},t.prototype.UpdateTextBoxText=function(){this.TextBox&&(this.Text=this.Control.FormatValue(this.Value)||"",this.TextBox.Text=this.Text,this.TextBox.SelectionStart=this.Text.length)},t.prototype.UpdateIsEditable=function(){this.TextBox&&(this.TextBox.IsReadOnly=!this.Control.IsEditable)},t}();t.TextBoxFormatter=n}(t=e.Internal||(e.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=e.Controls.Control,r=function(t){function n(){t.call(this),this.scaleTransform=new e.Media.ScaleTransform,this.DefaultStyleKey=n,this.SizeChanged.on(this.Star_SizeChanged,this)}return __extends(n,t),n.prototype.Star_SizeChanged=function(e,t){var n=t.NewSize.width/34,r=t.NewSize.height/34;this.scaleTransform.ScaleX=this.scaleTransform.ScaleY=Math.min(n,r)},n.prototype.OnApplyTemplate=function(){t.prototype.OnApplyTemplate.call(this),this.scaleTransform=this.GetTemplateChild("scaleTransform",e.Media.ScaleTransform)},n.StarFillBrushProperty=DependencyProperty.Register("StarFillBrush",function(){return e.Media.Brush},n,new e.Media.SolidColorBrush(Color.FromRgba(255,255,128,255))),n.HalfFillBrushProperty=DependencyProperty.Register("HalfFillBrush",function(){return e.Media.Brush},n,void 0),n.StrokeThicknessProperty=DependencyProperty.Register("StrokeThickness",function(){return Number},n,2),n.StrokeLineJoinProperty=DependencyProperty.Register("StrokeLineJoin",function(){return e.Shapes.PenLineJoin},n,e.Shapes.PenLineJoin.Round),n}(n);t.Star=r,e.Controls.TemplateParts(r,{Name:"scaleTransform",Type:e.Media.ScaleTransform})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=e.Controls.Control,r=e.Controls.Grid,o=minerva.controls.grid.GridUnitType,i=e.Media.Brush,a=function(n){function a(){n.call(this),this.stars=[],this.isHovering=!1,this.DefaultStyleKey=a}return __extends(a,n),a.prototype.OnNumberOfStarsChanged=function(e){this.CreateStars(),this.RefreshStarRating()},a.prototype.OnRatingChanged=function(e){this.DrawUnhovered()},a.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),this.LayoutRootStarList=this.GetTemplateChild("LayoutRootStarList",r),this.CreateStars()},a.prototype.OnMouseEnter=function(e){n.prototype.OnMouseEnter.call(this,e);var t=e.GetPosition(this.LayoutRootStarList);this.HandleMouseOver(t)},a.prototype.OnMouseMove=function(e){n.prototype.OnMouseMove.call(this,e);var t=e.GetPosition(this.LayoutRootStarList);this.HandleMouseOver(t)},a.prototype.OnMouseLeave=function(e){n.prototype.OnMouseLeave.call(this,e),this.IsHovering=!1},a.prototype.OnMouseLeftButtonDown=function(e){n.prototype.OnMouseLeftButtonDown.call(this,e),this.IsEnabled&&this.SetCurrentValue(a.RatingProperty,this.GetRatingFromPosition(e.GetPosition(this.LayoutRootStarList)))},a.prototype.HandleMouseOver=function(e){this.IsEnabled&&(this.IsHovering=this.IsInBounds(e),this.IsHovering&&this.SetCurrentValue(a.HoverRatingProperty,this.GetRatingFromPosition(e)))},a.prototype.IsInBounds=function(e){if(this.LayoutRootStarList.ColumnDefinitions.Count>0){var t=this.LayoutRootStarList.ColumnDefinitions.GetValueAt(0).ActualWidth*this.NumberOfStars,n=this.LayoutRootStarList.ColumnDefinitions.GetValueAt(0).ActualWidth;return e.y>=0&&e.y<n&&e.x>=0&&e.x<t}return!1},a.prototype.GetRatingFromPosition=function(e){var t=2*this.NumberOfStars,n=this.LayoutRootStarList.ColumnDefinitions.GetValueAt(0).ActualWidth*this.NumberOfStars,r=e.x/n,o=.75+r*t,i=parseInt(o.toString());return 0>i&&(i=0),i>t&&(i=t),i},Object.defineProperty(a.prototype,"IsHovering",{get:function(){return this.isHovering},set:function(e){this.isHovering!=e&&(this.isHovering=e,this.isHovering||this.DrawUnhovered())},enumerable:!0,configurable:!0}),a.prototype.CreateStars=function(){if(void 0!=this.LayoutRootStarList){this.stars=new Array,this.LayoutRootStarList.ColumnDefinitions.Clear(),this.LayoutRootStarList.Children.Clear();for(var n=0;n<this.NumberOfStars;n++){var r=new e.Controls.ColumnDefinition;r.Width=new e.Controls.GridLength(34,o.Star),this.LayoutRootStarList.ColumnDefinitions.Add(r);var i=new t.Star;i.StarFillBrush=this.StarFillBrush,i.Foreground=this.StarOutlineBrush,i.SetValue(e.Controls.Grid.ColumnProperty,n);var a=new e.Data.Binding;a.ElementName="LayoutRootStarList",a.Path=new e.Data.PropertyPath("Parent.StrokeThickness"),i.SetBinding(t.Star.StrokeThicknessProperty,a),i.StrokeThickness=this.StrokeThickness;var s=new e.Data.Binding;s.ElementName="LayoutRootStarList",s.Path=new e.Data.PropertyPath("Parent.StrokeLineJoin"),i.SetBinding(t.Star.StrokeLineJoinProperty,s),i.StrokeLineJoin=this.StrokeLineJoin,this.LayoutRootStarList.Children.Add(i),this.stars.push(i)}this.RefreshStarRating()}},a.prototype.RefreshStarRating=function(){this.isHovering?this.DrawStarRating(this.HoverRating,this.HoverFillBrush,this.HoverOutlineBrush,this.UnselectedHoverFillBrush):this.DrawUnhovered()},a.prototype.DrawUnhovered=function(){this.DrawStarRating(this.Rating,this.StarFillBrush,this.StarOutlineBrush,this.UnselectedStarFillBrush)},a.prototype.DrawStarRating=function(e,t,n,r){for(var o=0;o<this.NumberOfStars;o++)void 0!=this.stars[o]&&(e>=2*(o+1)?(this.stars[o].StarFillBrush=t,this.stars[o].HalfFillBrush=null):e>=1+2*o?(this.stars[o].StarFillBrush=r,this.stars[o].HalfFillBrush=t):(this.stars[o].StarFillBrush=r,this.stars[o].HalfFillBrush=null),this.stars[o].Foreground=n,this.stars[o].StrokeThickness=this.StrokeThickness,this.stars[o].StrokeLineJoin=this.StrokeLineJoin)},a.NumberOfStarsProperty=DependencyProperty.Register("NumberOfStars",function(){return Number},a,5,function(e,t){return e.OnNumberOfStarsChanged(t)}),a.RatingProperty=DependencyProperty.Register("Rating",function(){return Number},a,0,function(e,t){return e.OnRatingChanged(t)}),a.HoverRatingProperty=DependencyProperty.Register("HoverRating",function(){return Number},a,0,function(e,t){return e.RefreshStarRating()}),a.StarFillBrushProperty=DependencyProperty.Register("StarFillBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.UnselectedStarFillBrushProperty=DependencyProperty.Register("UnselectedStarFillBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.StarOutlineBrushProperty=DependencyProperty.Register("StarOutlineBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.HoverFillBrushProperty=DependencyProperty.Register("HoverFillBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.UnselectedHoverFillBrushProperty=DependencyProperty.Register("UnselectedHoverFillBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.HoverOutlineBrushProperty=DependencyProperty.Register("HoverOutlineBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.StrokeThicknessProperty=DependencyProperty.Register("StrokeThickness",function(){return Number},a,2),a.StrokeLineJoinProperty=DependencyProperty.Register("StrokeLineJoin",function(){return e.Shapes.PenLineJoin},a,e.Shapes.PenLineJoin.Round),a}(n);t.StarRating=a,e.Controls.TemplateParts(a,{Name:"LayoutRootStarList",Type:e.Controls.Grid})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.CreateLayoutUpdater=function(){return new t.tabpanel.TabPanelUpdater},Object.defineProperty(r.prototype,"TabAlignment",{get:function(){var n=e.VisualTreeHelper.GetParentOfType(this,t.TabControl);return null!=n?n.TabStripPlacement:t.Dock.Top},enumerable:!0,configurable:!0}),r.setTabAlignment=function(e,t){if(e){var n=e.XamlNode.LayoutUpdater;n.assets.tabAlignment=t}},r}(t.Panel);t.TabPanel=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setMeasurePipe(minerva.singleton(t.measure.TabPanelMeasurePipeDef)).setArrangePipe(minerva.singleton(t.arrange.TabPanelArrangePipeDef));var r=this.assets;r.tabAlignment=e.Dock.Top,r.numRows=1,r.numHeaders=0,r.rowHeight=0,n.prototype.init.call(this)},r}(minerva.controls.panel.PanelUpdater);t.TabPanelUpdater=n}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var r,o=minerva.Size,i=minerva.Visibility;!function(n){function r(e){var t=a(e),n=new o;o.copyTo(e.assets.desiredSize,n);var r=e.assets.margin;return n.height=Math.max(0,n.height-r.top-r.bottom),n.width=Math.max(0,n.width-r.left-r.right+t),n}function a(n){var r=n.getAttachedValue("$node"),o=r?r.XObject:null;if(!(o instanceof t.TabItem)||o.IsSelected)return 0;var i=o.GetTemplate(o.IsSelected,o.TabStripPlacement);if(!(i instanceof t.Panel)||i.Children.Count<=0)return 0;var a=i.Children.GetValueAt(0);return a instanceof e.FrameworkElement&&a.Margin?Math.abs(a.Margin.left+a.Margin.right):0}function s(e){for(var t=[],n=e.walk();n.step();){var o=n.current,a=o.assets.visibility===i.Collapsed?0:r(o).width;t.push(a)}return t}function l(e){var n=e.getAttachedValue("$node"),r=n?n.XObject:null;if(r instanceof t.TabItem){var o=r.IsSelected?1:0;r.SetCurrentValue(t.Canvas.ZIndexProperty,o)}}function u(e){var n=e.getAttachedValue("$node"),r=n?n.XObject:null;return r instanceof t.TabItem?r.IsSelected===!0:void 0}function p(e,t,n){var r=0,o=0;if(t.length>0)for(var i=e.walk();i.step();){var a=i.current;if(u(a))return r;r<t.length&&t[r]===o&&++r,++o}return n&&(r=this._NumberOfRows-1),r}function c(e,t,n){for(var r=0,o=n.length,a=this._NumberOfRows-1,s=0,l=0,u=new Array(a),p=new Array(a),c=new Array(this._NumberOfRows),h=c.slice(0),d=c.slice(0),m=c.slice(0),y=0,f=0;o>f;++f)if(s+n[f]>t&&l>0){h[y]=s,c[y]=l;var C=Math.max(0,(t-s)/l);d[y]=C,u[y]=f-1,C>r&&(r=C),++y,s=n[f],l=1}else s+=n[f],0!=n[f]&&++l;if(0===y)return[];h[y]=s,c[y]=l;var S=(t-s)/l;for(d[y]=S,S>r&&(r=S),p=u.slice(0),m=d.slice(0);;){var C=0;do{for(var I=0,g=0,f=0;f<this._NumberOfRows;++f)g<d[f]&&(g=d[f],I=f);if(0==I)break;var f=I,v=f-1,T=u[v],P=n[T];if(h[f]+=P,!(h[f]<=t))break;--u[v],++c[f],h[v]-=P,--c[v],d[v]=(t-h[v])/c[v],d[f]=(t-h[f])/c[f],C=0;for(var x=0;x<this._NumberOfRows;++x)C<d[x]&&(C=d[x])}while(C>=r);r=C,p=u.slice(0),m=d.slice(0)}for(var O=0,w=0,V=e.walk();V.step();){var b=V.current;b.assets.visibility===i.Visible&&(n[w]+=m[O]),a>O&&p[O]==w&&++O,++w}return p}n.getDesiredSizeWithoutMargin=r,n.getHeadersSize=s,n.setTabItemZ=l,n.getActiveRow=p,n.calculateHeaderDistribution=c}(r=n.helpers||(n.helpers={}))}(n=t.tabpanel||(t.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t=function(){function e(e,t){this.Handled=!1,Object.defineProperties(this,{Item:{value:e,writable:!1},Target:{value:t,writable:!1}})}return e}();e.FocusingInvalidControlEventArgs=t}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=e.Collections.ObservableCollection,r=e.Collections.ReadOnlyObservableCollection,o=function(n){function o(){n.call(this),this._ErrorsListBox=null,this._HeaderContentControl=null,this._ValidationSummaryItemDictionary={},this._Errors=new i,this._DisplayedErrors=new i,this.FocusingInvalidControl=new nullstone.Event,this.SelectionChanged=new nullstone.Event,this.DefaultStyleKey=o,this._Errors.CollectionChanged.on(this.Errors_CollectionChanged,this),this.Loaded.on(this.ValidationSummary_Loaded,this),this.Unloaded.on(this.ValidationSummary_Unloaded,this),this.IsEnabledChanged.on(this.ValidationSummary_IsEnabledChanged,this)}return __extends(o,n),o.GetShowErrorsInSummary=function(e){return e.GetValue(o.ShowErrorsInSummaryProperty)===!0},o.SetShowErrorsInSummary=function(e,t){e.SetValue(o.ShowErrorsInSummaryProperty,t===!0)},o.OnShowErrorsInSummaryChanged=function(t,n){var r=e.VisualTreeHelper.GetRoot(t);r&&o.UpdateDisplayedErrorsOnAllValidationSummaries(r)},o.prototype.OnFilterChanged=function(e,t){this.UpdateDisplayedErrors()},o.prototype.OnHeaderChanged=function(e,t){this.UpdateHeaderText()},o.prototype.OnTargetChanged=function(n,r){null!=this._RegisteredParent&&(this._RegisteredParent.BindingValidationError.off(this.Target_BindingValidationError,this),this._RegisteredParent=null),n instanceof e.FrameworkElement&&n.BindingValidationError.off(this.Target_BindingValidationError,this),r instanceof e.FrameworkElement&&r.BindingValidationError.on(this.Target_BindingValidationError,this),this._Errors.ClearErrors(t.ValidationSummaryItemType.PropertyError),this.UpdateDisplayedErrors()},Object.defineProperty(o.prototype,"Errors",{get:function(){return this._Errors},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"DisplayedErrors",{get:function(){return new r(this._DisplayedErrors)},enumerable:!0,configurable:!0}),o.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),null!=this._ErrorsListBox&&(this._ErrorsListBox.MouseLeftButtonUp.off(this.ErrorsListBox_MouseLeftButtonUp,this),this._ErrorsListBox.KeyDown.off(this.ErrorsListBox_KeyDown,this),this._ErrorsListBox.SelectionChanged.off(this.ErrorsListBox_SelectionChanged,this)),this._ErrorsListBox=this.GetTemplateChild("SummaryListBox",t.ListBox),null!=this._ErrorsListBox&&(this._ErrorsListBox.MouseLeftButtonUp.on(this.ErrorsListBox_MouseLeftButtonUp,this),this._ErrorsListBox.KeyDown.on(this.ErrorsListBox_KeyDown,this),this._ErrorsListBox.ItemsSource=this.DisplayedErrors,this._ErrorsListBox.SelectionChanged.on(this.ErrorsListBox_SelectionChanged,this)),this._HeaderContentControl=this.GetTemplateChild("HeaderContentControl",t.ContentControl),this.UpdateDisplayedErrors(),this.UpdateCommon(!1),this.UpdateValidation(!1)},o.prototype.Errors_CollectionChanged=function(e,t){if(null!=t.OldItems)for(var n=0,r=t.OldItems;n<r.length;n++){var i=r[n];i&&i.PropertyChanged.off(this.ValidationSummaryItem_PropertyChanged,this)}if(null!=t.NewItems)for(var n=0,r=t.NewItems;n<r.length;n++){var i=r[n];i&&i.PropertyChanged.on(this.ValidationSummaryItem_PropertyChanged,this)}this.SetCurrentValue(o.HasErrorsProperty,this._Errors.Count>0),this.UpdateDisplayedErrors()},o.prototype.ErrorsListBox_KeyDown=function(t,n){n.Key===e.Input.Key.Enter&&this.ExecuteClick(t)},o.prototype.ErrorsListBox_MouseLeftButtonUp=function(e,t){this.ExecuteClick(e)},o.prototype.ErrorsListBox_SelectionChanged=function(e,t){this.SelectionChanged.raise(this,t)},o.prototype.ValidationSummary_Loaded=function(t,n){if(!this.Target&&!this._RegisteredParent){var r=e.VisualTreeHelper.GetParent(this);this._RegisteredParent=r instanceof e.FrameworkElement?r:null,null!=this._RegisteredParent&&this._RegisteredParent.BindingValidationError.on(this.Target_BindingValidationError,this)}this.Loaded.off(this.ValidationSummary_Loaded,this)},o.prototype.ValidationSummary_Unloaded=function(e,t){null!=this._RegisteredParent&&this._RegisteredParent.BindingValidationError.off(this.Target_BindingValidationError,this),this.Unloaded.off(this.ValidationSummary_Unloaded,this)},o.prototype.ValidationSummary_IsEnabledChanged=function(e,t){this.UpdateCommon(!0)},o.prototype.ValidationSummaryItem_PropertyChanged=function(e,t){"ItemType"===t.PropertyName&&this.UpdateDisplayedErrors()},o.prototype.UpdateValidation=function(t){var n=this,r=function(r){return e.Media.VSM.VisualStateManager.GoToState(n,r,t)};this._DisplayedErrors.Count>0?(this.SetCurrentValue(o.HasDisplayedErrorsProperty,!0),r("HasErrors")):(this.SetCurrentValue(o.HasDisplayedErrorsProperty,!1),r("Empty"))},o.prototype.UpdateCommon=function(t){var n=this,r=function(r){return e.Media.VSM.VisualStateManager.GoToState(n,r,t)};r(this.IsEnabled?"Normal":"Disabled")},o.prototype.UpdateHeaderText=function(){var e=this._HeaderContentControl;e&&(e.Content=null!=this.Header?this.Header:this.GetHeaderString())},o.prototype.UpdateDisplayedErrors=function(){for(var e=(this.Filter&t.ValidationSummaryFilters.ObjectErrors)!==t.ValidationSummaryFilters.None,n=(this.Filter&t.ValidationSummaryFilters.PropertyErrors)!==t.ValidationSummaryFilters.None,r=[],o=this.Errors.getEnumerator();o.moveNext();){var i=o.current;i&&(e&&i.ItemType===t.ValidationSummaryItemType.ObjectError?r.push(i):n&&i.ItemType===t.ValidationSummaryItemType.PropertyError&&r.push(i))}r.sort(t.compareSummaryItems),this._DisplayedErrors.Clear(),this._DisplayedErrors.AddRange(r),this.UpdateValidation(!0),this.UpdateHeaderText()},o.prototype.Target_BindingValidationError=function(n,r){var i=r.OriginalSource;if(r&&r.Error&&null!=r.Error.ErrorContent&&i instanceof e.FrameworkElement){var a=r.Error.ErrorContent.toString(),s=(i.Name||i._ID.toString())+a,l=this._ValidationSummaryItemDictionary;if(r.Action===e.Validation.ValidationErrorEventAction.Added){if(o.GetShowErrorsInSummary(i)===!1)return;var u=r.Error.PropertyName,p=new t.ValidationSummaryItem(a,u,t.ValidationSummaryItemType.PropertyError,new t.ValidationSummaryItemSource(u,i),null);this._Errors.Add(p),l[s]=p}else r.Action===e.Validation.ValidationErrorEventAction.Removed&&l[s]&&(this._Errors.Remove(l[s]),l[s]=void 0)}},o.prototype.GetHeaderString=function(){var e=this._DisplayedErrors.Count;return 1===e?"1 Error":e.toString()+" Errors"},o.prototype.ExecuteClick=function(e){var n=e;if(n instanceof t.ListBox){var r=n.SelectedItem;if(r instanceof t.ValidationSummaryItem&&this.FocusControlsOnClick){0===r.Sources.Count?this._CurSummItemsSource=null:o.FindMatchingErrorSource(r.Sources,this._CurSummItemsSource)<0&&(this._CurSummItemsSource=r.Sources.GetValueAt(0));var i=new t.FocusingInvalidControlEventArgs(r,this._CurSummItemsSource);if(this.FocusingInvalidControl.raise(this,i),i.Handled||null==i.Target||null==i.Target.Control||i.Target.Control.Focus(),!(r.Sources.Count<=0)){var a=o.FindMatchingErrorSource(r.Sources,i.Target),s=0>a?0:(a+1)%r.Sources.Count;this._CurSummItemsSource=r.Sources.GetValueAt(s)}}}},o.FindMatchingErrorSource=function(e,t){if(!e)return-1;for(var n=0;n<e.Count;n++)if(e.GetValueAt(n).Equals(t))return n;return-1},o.UpdateDisplayedErrorsOnAllValidationSummaries=function(t){if(t)if(t instanceof o)t.UpdateDisplayedErrors();else for(var n=0,r=e.VisualTreeHelper.GetChildrenCount(t);r>n;n++)o.UpdateDisplayedErrorsOnAllValidationSummaries(e.VisualTreeHelper.GetChild(t,n))},o.ShowErrorsInSummaryProperty=DependencyProperty.RegisterAttached("ShowErrorsInSummary",function(){return Boolean},o,!0,o.OnShowErrorsInSummaryChanged),o.ErrorStyleProperty=DependencyProperty.Register("ErrorStyle",function(){return e.Style},o),o.FilterProperty=DependencyProperty.Register("Filter",function(){return new e.Enum(t.ValidationSummaryFilters)},o,t.ValidationSummaryFilters.All,function(e,t){return e.OnFilterChanged(t.OldValue,t.NewValue)}),o.FocusControlsOnClickProperty=DependencyProperty.Register("FocusControlsOnClick",function(){return Boolean},o,!0),o.HasErrorsProperty=DependencyProperty.RegisterReadOnly("HasErrors",function(){return Boolean},o,!1),o.HasDisplayedErrorsProperty=DependencyProperty.RegisterReadOnly("HasDisplayedErrors",function(){return Boolean},o,!1),o.HeaderProperty=DependencyProperty.Register("Header",function(){return Object},o,void 0,function(e,t){return e.OnHeaderChanged(t.OldValue,t.NewValue)}),o.HeaderTemplateProperty=DependencyProperty.Register("HeaderTemplate",function(){return e.DataTemplate},o),o.SummaryListBoxStyleProperty=DependencyProperty.Register("SummaryListBoxStyle",function(){return e.Style},o),o.TargetProperty=DependencyProperty.Register("Target",function(){return e.UIElement},o,void 0,function(e,t){return e.OnTargetChanged(t.OldValue,t.NewValue)}),o}(t.Control);t.ValidationSummary=o,t.TemplateVisualStates(o,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"ValidationStates",Name:"HasErrors"},{GroupName:"ValidationStates",Name:"Empty"}),t.TemplateParts(o,{Name:"SummaryListBox",Type:t.ListBox});var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.ClearErrors=function(e){for(var t=[],n=this.getEnumerator();n.moveNext();)null!=n.current&&n.current.ItemType===e&&t.push(n.current);for(var r=0;r<t.length;r++)this.Remove(t[r])},t.prototype.ClearItems=function(){for(;this.Count>0;)this.RemoveAt(0)},t}(n)}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=e.Collections.ObservableCollection,r=function(e){function r(r,o,i,a,s){e.call(this),this.Message=r||null,this.MessageHeader=o||null,this.ItemType=i||t.ValidationSummaryItemType.ObjectError,this._Sources=new n,null!=a&&this._Sources.Add(a),this.Context=s}return __extends(r,e),Object.defineProperty(r.prototype,"Sources",{get:function(){return this._Sources},enumerable:!0,configurable:!0}),r}(e.MVVM.ObservableObject);t.ValidationSummaryItem=r,e.MVVM.NotifyProperties(r,["Message","MessageHeader","ItemType","Context"])}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t=function(){function e(e,t){Object.defineProperties(this,{PropertyName:{value:e,writable:!1},Control:{value:t||null,writable:!1}})}return e.prototype.Equals=function(t){if(!(t instanceof e))return!1;var n=t;return n.PropertyName===this.PropertyName&&n.Control===this.Control},e}();e.ValidationSummaryItemSource=t}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(e,t){var n=r(e,t);if(null!=n)return n;var a=o(e.ItemType,t.ItemType);if(0!==a)return a;var s=e.Sources.Count>0?e.Sources.GetValueAt(0).Control:null,l=t.Sources.Count>0?t.Sources.GetValueAt(0).Control:null;return s!==l?(n=r(s,l),null!=n?n:(a=o(s.TabIndex,l.TabIndex),0!==a?a:i(s,l))):void 0}function r(e,t){return null==e?null==t?null:-1:null==t?1:null}function o(e,t){return e===t?0:t>e?-1:1}function i(t,n){if(!t||!n||t===n)return 0;var r=[],o=t;for(r.push(o);null!=(o=e.VisualTreeHelper.GetParent(o));)r.push(o);o=n;for(var i=o;null!=(o=e.VisualTreeHelper.GetParent(o));){var a=r.indexOf(o);if(0===a)return-1;if(!(0>a)){var s=r[a-1];if(!i||!s)return 0;for(var l=0,u=e.VisualTreeHelper.GetChildrenCount(o);u>l;l++){var p=e.VisualTreeHelper.GetChild(o,l);if(p===s)return 1;if(p===i)return-1}i=o}}return 0}t.compareSummaryItems=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.CreateLayoutUpdater=function(){return new t.viewbox.ViewboxUpdater},r.ChildProperty=DependencyProperty.Register("Child",function(){return e.UIElement},r),r.StretchProperty=DependencyProperty.Register("Stretch",function(){return new e.Enum(e.Media.Stretch)},r,void 0,function(e,t){return e.InvalidateMeasure()}),r.StretchDirectionProperty=DependencyProperty.Register("StretchDirection",function(){return new e.Enum(t.StretchDirection)},r,void 0,function(e,t){return e.InvalidateMeasure()}),r}(e.FrameworkElement);t.Viewbox=n,e.Markup.Content(n,n.ChildProperty);var r;!function(t){e.UIReaction(n.StretchProperty,function(e,t,n){return e.invalidateMeasure()},!1),e.UIReaction(n.StretchDirectionProperty,function(e,t,n){return e.invalidateMeasure()},!1),e.UIReaction(n.ChildProperty,function(t,n,r,o){var i=o.XamlNode,a=new BError;n instanceof e.UIElement&&i.DetachVisualChild(n,a),r instanceof e.UIElement&&i.AttachVisualChild(r,a),a.Message&&a.ThrowException(),t.updateBounds(),t.invalidateMeasure()},!1,!1)}(r||(r={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var r=function(r){function o(){r.apply(this,arguments)}return __extends(o,r),o.prototype.init=function(){this.setProcessDownPipe(minerva.singleton(n.processdown.ViewboxProcessDownPipeDef));var o=this.assets;o.stretch=e.Media.Stretch.Uniform,o.stretchDirection=t.StretchDirection.Both,o.viewXform=mat3.identity(),r.prototype.init.call(this)},o.prototype.measureOverride=function(e){var t=this.tree.subtree;if(!t)return new Size;t.measure(new Size(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY));var r=t.assets.desiredSize,o=n.helpers.computeScaleFactor(e,r,this.assets.stretch,this.assets.stretchDirection);return new Size(o.width*r.width,o.height*r.height)},o.prototype.arrangeOverride=function(e){var t=this.tree.subtree;if(!t)return new Size;var r=this.assets,o=t.assets.desiredSize,i=n.helpers.computeScaleFactor(e,o,r.stretch,r.stretchDirection);return t.arrange(new Rect(0,0,o.width,o.height)),this.setViewXform(i.width,i.height),new Size(i.width*o.width,i.height*o.height)},o.prototype.setViewXform=function(e,t){var n=this.assets,r=mat3.createScale(e,t);mat3.equal(n.viewXform,r)||(mat3.copyTo(r,n.viewXform),n.dirtyFlags|=minerva.DirtyFlags.Transform)},o}(minerva.anon.AnonymousUpdater);n.ViewboxUpdater=r}(n=t.viewbox||(t.viewbox={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var r;!function(n){function r(n,r,i,a){var s=1,l=1,u=isFinite(n.width),p=isFinite(n.height);if((i===e.Media.Stretch.Uniform||i===e.Media.Stretch.UniformToFill||i===e.Media.Stretch.Fill)&&(u||p)){if(s=o(r.width)?0:n.width/r.width,l=o(r.height)?0:n.height/r.height,u)if(p)switch(i){case e.Media.Stretch.Uniform:var c=l>s?s:l;s=l=c;break;case e.Media.Stretch.UniformToFill:var h=s>l?s:l;s=l=h;break;case e.Media.Stretch.Fill:}else l=s;else s=l;switch(a){case t.StretchDirection.UpOnly:1>s&&(s=1),1>l&&(l=1);break;case t.StretchDirection.DownOnly:s>1&&(s=1),l>1&&(l=1);break;case t.StretchDirection.Both:}}return new Size(s,l)}function o(e){return Math.abs(e)<i}n.computeScaleFactor=r;var i=1.192093e-7}(r=n.helpers||(n.helpers={}))}(n=t.viewbox||(t.viewbox={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.CreateLayoutUpdater=function(){return new t.wrappanel.WrapPanelUpdater},r.OrientationProperty=DependencyProperty.Register("Orientation",function(){
return new e.Enum(e.Orientation)},r,e.Orientation.Horizontal),r.ItemWidthProperty=DependencyProperty.Register("ItemWidth",function(){return Number},r,NaN),r.ItemHeightProperty=DependencyProperty.Register("ItemHeight",function(){return Number},r,NaN),r}(e.Controls.Panel);t.WrapPanel=n;var r;!function(t){e.UIReaction(n.OrientationProperty,function(e,t,n){return e.invalidateMeasure()},!1),e.UIReaction(n.ItemWidthProperty,function(e,t,n){return e.invalidateMeasure()},!1),e.UIReaction(n.ItemHeightProperty,function(e,t,n){return e.invalidateMeasure()},!1)}(r||(r={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setMeasurePipe(minerva.singleton(t.measure.WrapPanelMeasurePipeDef)).setArrangePipe(minerva.singleton(t.arrange.WrapPanelArrangePipeDef));var r=this.assets;r.orientation=e.Orientation.Horizontal,r.itemWidth=NaN,r.itemHeight=NaN,n.prototype.init.call(this)},r}(minerva.controls.panel.PanelUpdater);t.WrapPanelUpdater=n}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,n){var r=e.getAttachedValue("$node"),o=r?r.XObject:null;o&&(isNaN(e.assets.width)&&!isNaN(t)&&(o.Width=t),isNaN(e.assets.height)&&!isNaN(n)&&(o.Height=n))}e.coerceChildSize=t}(t=e.helpers||(e.helpers={}))}(t=e.wrappanel||(e.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(t){function n(){t.call(this),this.addTapinAfter("doOverride","doVertical",e.tapins.doVertical).addTapinAfter("doVertical","doHorizontal",e.tapins.doHorizontal).removeTapin("doOverride")}return __extends(n,t),n}(minerva.controls.panel.arrange.PanelArrangePipeDef);e.TabPanelArrangePipeDef=t}(t=e.arrange||(e.arrange={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=minerva.controls.panel,n=function(t){function n(){t.call(this),this.addTapinAfter("doOverride","doVertical",e.tapins.doVertical).addTapinAfter("doVertical","doHorizontal",e.tapins.doHorizontal).removeTapin("doOverride")}return __extends(n,t),n.prototype.createOutput=function(){var e=t.prototype.createOutput.call(this);return e.numRows=1,e.numHeaders=0,e.rowHeight=0,e},n.prototype.prepare=function(e,n,r){r.numRows=e.numRows,r.numHeaders=e.numHeaders,r.rowHeight=e.rowHeight,t.prototype.prepare.call(this,e,n,r)},n.prototype.flush=function(e,n,r){t.prototype.flush.call(this,e,n,r),e.numRows=r.numRows,e.numHeaders=r.numHeaders,e.rowHeight=r.rowHeight},n}(t.measure.PanelMeasurePipeDef);e.TabPanelMeasurePipeDef=n}(t=e.measure||(e.measure={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(e){function t(){e.call(this),this.addTapinAfter("calcRenderXform","applyViewXform",n.applyViewXform)}return __extends(t,e),t}(minerva.core.processdown.ProcessDownPipeDef);e.ViewboxProcessDownPipeDef=t;var n;!function(e){function t(e,t,n,r,o){return 0===(e.dirtyFlags&minerva.DirtyFlags.Transform)?!0:(mat3.preapply(n.renderXform,e.viewXform),!0)}e.applyViewXform=t}(n||(n={}))}(t=e.processdown||(e.processdown={}))}(t=e.viewbox||(e.viewbox={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=minerva.controls.panel,n=function(t){function n(){t.call(this),this.addTapinAfter("doOverride","doHorizontal",e.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",e.tapins.doVertical).removeTapin("doOverride")}return __extends(n,t),n}(t.arrange.PanelArrangePipeDef);e.WrapPanelArrangePipeDef=n}(t=e.arrange||(e.arrange={}))}(t=e.wrappanel||(e.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=minerva.controls.panel,n=function(t){function n(){t.call(this),this.addTapinAfter("doOverride","doHorizontal",e.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",e.tapins.doVertical).removeTapin("doOverride")}return __extends(n,t),n}(t.measure.PanelMeasurePipeDef);e.WrapPanelMeasurePipeDef=n}(t=e.measure||(e.measure={}))}(t=e.wrappanel||(e.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n;!function(n){var r;!function(n){function r(n,r,i,a,s){if(n.tabAlignment!==e.Dock.Top&&n.tabAlignment!==e.Dock.Bottom)return!0;var l=r.finalSize,u=n.numRows>1,p=0,c=[],h=new o,d=t.helpers.getHeadersSize(a);u&&(c=t.helpers.calculateHeaderDistribution(a,l.width,d),p=t.helpers.getActiveRow(a,c,n.tabAlignment===e.Dock.Top),n.tabAlignment===e.Dock.Top&&(h.y=(n.numRows-1-p)*n.rowHeight),n.tabAlignment===e.Dock.Bottom&&0!==p&&(h.y=(n.numRows-p)*n.rowHeight));var m=r.childRect;m.x=m.y=m.width=m.height=0,m.height=n.rowHeight;for(var y=0,f=0,C=a.walk();C.step();){var S=C.current;if(S.assets.visibility!==minerva.Visibility.Collapsed){m.width=d[y],m.height=n.rowHeight;var I=u&&(f<c.length&&c[f]===y||y===n.numHeaders-1);I&&(m.width=l.width-h.x),S.arrange(m),m.x+=m.width,I&&(f===p&&n.tabAlignment===e.Dock.Top||f===p-1&&n.tabAlignment===e.Dock.Bottom?h.y=0:h.y+=n.rowHeight,h.x=0,f++),y++}}return!0}var o=minerva.Point;n.doHorizontal=r}(r=n.tapins||(n.tapins={}))}(n=t.arrange||(t.arrange={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n;!function(n){var r;!function(n){function r(n,r,o,i,a){if(n.tabAlignment!==e.Dock.Left&&n.tabAlignment!==e.Dock.Right)return!0;var s=r.childRect;s.x=s.y=0,s.width=r.finalSize.width;for(var l=i.walk();l.step();){var u=l.current;if(u.assets.visibility!==minerva.Visibility.Collapsed){t.helpers.setTabItemZ(u);var p=t.helpers.getDesiredSizeWithoutMargin(u);s.height=p.height,u.arrange(s),s.y+=p.height}}return!0}n.doVertical=r}(r=n.tapins||(n.tapins={}))}(n=t.arrange||(t.arrange={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n;!function(n){var r;!function(n){function r(n,r,o,i,a){if(n.tabAlignment!==e.Dock.Top&&n.tabAlignment!==e.Dock.Bottom)return!0;var s=o.desiredSize;s.width=s.height=0,o.numRows=1,o.numHeaders=0,o.rowHeight=0;for(var l=0,u=0,p=0,c=i.walk();c.step();){var h=c.current;if(h.assets.visibility===minerva.Visibility.Collapsed)break;o.numHeaders++,h.measure(r.availableSize);var d=t.helpers.getDesiredSizeWithoutMargin(h);o.rowHeight<d.height&&(o.rowHeight=d.height),u+d.width>a.width&&l>0?(u>p&&(p=u),u=d.width,l=1,o.numRows++):(u+=d.width,l++)}return u>p&&(p=u),s.height=o.rowHeight*o.numRows,s.width=!isFinite(s.width)||isNaN(s.width)||p<a.width?p:a.width,!0}n.doHorizontal=r}(r=n.tapins||(n.tapins={}))}(n=t.measure||(t.measure={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n;!function(n){var r;!function(n){function r(n,r,o,i,a){if(n.tabAlignment!==e.Dock.Left&&n.tabAlignment!==e.Dock.Right)return!0;var s=o.desiredSize;s.width=s.height=0,o.numRows=1,o.numHeaders=0,o.rowHeight=0;for(var l=i.walk();l.step();){var u=l.current;if(u.assets.visibility===minerva.Visibility.Collapsed)break;o.numHeaders++,u.measure(r.availableSize);var p=t.helpers.getDesiredSizeWithoutMargin(u);s.width<p.width&&(s.width=p.width),s.height+=p.height}return!0}n.doVertical=r}(r=n.tapins||(n.tapins={}))}(n=t.measure||(t.measure={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n;!function(t){function n(t,n,o,i,a){if(t.orientation!==e.Orientation.Horizontal)return!0;var s=n.finalSize,l=n.arrangedSize;r.copyTo(s,l);var u=n.childRect;u.x=u.y=u.width=u.height=0;for(var p=0,c=i.walk();c.step();){var h=c.current,d=h.assets.desiredSize;s.width<u.x+d.width&&(u.x=0,u.y+=p,p=0),p=Math.max(p,d.height),r.copyTo(d,u),h.arrange(u),u.x+=d.width}return l.width=Math.max(l.width,s.width),!0}var r=minerva.Size;t.doHorizontal=n}(n=t.tapins||(t.tapins={}))}(n=t.arrange||(t.arrange={}))}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n;!function(t){function n(t,n,o,i,a){if(t.orientation!==e.Orientation.Vertical)return!0;var s=n.finalSize,l=n.arrangedSize;r.copyTo(s,l);var u=n.childRect;u.x=u.y=u.width=u.height=0;for(var p=0,c=i.walk();c.step();){var h=c.current,d=h.assets.desiredSize;s.height<u.y+d.height&&(u.x+=p,u.y=0,p=0),p=Math.max(p,d.width),r.copyTo(d,u),h.arrange(u),u.y+=d.height}return l.height=Math.max(l.height,s.height),!0}var r=minerva.Size;t.doVertical=n}(n=t.tapins||(t.tapins={}))}(n=t.arrange||(t.arrange={}))}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n;!function(n){var r;!function(n){function r(n,r,o,i,a){if(n.orientation!==e.Orientation.Horizontal)return!0;var s=r.availableSize;isNaN(n.height)||(s.height=n.height),s.height=Math.min(s.height,n.maxHeight),s.height=Math.max(s.height,n.minHeight);var l=o.desiredSize;l.width=l.height=0;for(var u=0,p=0,c=0,h=i.walk();h.step();){var d=h.current;t.helpers.coerceChildSize(d,n.itemWidth,n.itemHeight),d.measure(s);var m=d.assets.desiredSize;s.width<p+m.width&&(p=0,c+=u,u=0),u=Math.max(u,m.height),l.height=Math.max(l.height,c+m.height),l.width=Math.max(l.width,p+m.width),p+=m.width}return!0}n.doHorizontal=r}(r=n.tapins||(n.tapins={}))}(n=t.measure||(t.measure={}))}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n;!function(n){var r;!function(n){function r(n,r,o,i,a){if(n.orientation!==e.Orientation.Vertical)return!0;var s=r.availableSize;isNaN(n.width)||(s.width=n.width),s.width=Math.min(s.width,n.maxWidth),s.width=Math.max(s.width,n.minWidth);var l=o.desiredSize;l.width=l.height=0;for(var u=0,p=0,c=0,h=i.walk();h.step();){var d=h.current;t.helpers.coerceChildSize(d,n.itemWidth,n.itemHeight),d.measure(s);var m=d.assets.desiredSize;s.height<c+m.height&&(p+=u,c=0,u=0),u=Math.max(u,m.width),l.height=Math.max(l.height,c+m.height),l.width=Math.max(l.width,p+m.width),c+=m.height}return!0}n.doVertical=r}(r=n.tapins||(n.tapins={}))}(n=t.measure||(t.measure={}))}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));
//# sourceMappingURL=fayde.controls.min.js.map
